{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Desktop\\\\polygon_without_ws\\\\stock-tracker\\\\src\\\\components\\\\StockTracker.js\",\n  _s = $RefreshSig$();\n// // import React, { useState, useEffect } from 'react';\n// // import axios from 'axios';\n// // import { Line, Bar } from 'react-chartjs-2';\n// // import 'chart.js/auto'; // Required for chart.js\n\n// // const StockTracker = () => {\n// //   const [symbol, setSymbol] = useState('');\n// //   const [priceData, setPriceData] = useState([]);\n// //   const [volumeData, setVolumeData] = useState([]);\n// //   const [contractData, setContractData] = useState([]);\n// //   const [toggleVolume, setToggleVolume] = useState(false); // Toggles between volume and dollar amount\n\n// //   const handleSubmit = (e) => {\n// //     e.preventDefault();\n// //     fetchStockData(symbol);\n// //   };\n\n// //   const fetchStockData = async (symbol) => {\n// //     try {\n// //       const now = new Date();\n// //       const tenMinutesAgo = new Date(now.getTime() - 10 * 60 * 1000);\n\n// //       // Convert to YYYY-MM-DD format as required by Polygon API\n// //       const fromDate = tenMinutesAgo.toISOString().split('T')[0]; \n// //       const toDate = now.toISOString().split('T')[0]; \n\n// //       // Fetch stock price data\n// //       const priceResponse = await axios.get(\n// //         `https://api.polygon.io/v2/aggs/ticker/${symbol}/range/1/minute/2024-09-20/2024-09-22?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\n// //       );\n\n// //       console.log(\"Price Response\",priceResponse.data.results);\n// //       setPriceData(priceResponse.data.results || []); // Update your price data state\n\n// //       // Fetch volume data for the closest expiry date\n// //       const volumeResponse = await axios.get(\n// //         `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${symbol}&contract_type=all&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\n// //       );\n// //       console.log(volumeResponse.data.results);\n\n// //       setVolumeData(volumeResponse.data.results || []); // Update your volume data state\n// //     } catch (error) {\n// //       if (error.response && error.response.status === 429) {\n// //         // Handle rate limiting (Too Many Requests)\n// //         console.error(\"Rate limit exceeded. Please wait or upgrade your subscription.\");\n\n// //         // Implement a retry after a delay (e.g., 60 seconds)\n// //         setTimeout(() => {\n// //           fetchStockData(symbol); // Retry fetching data after 60 seconds\n// //         }, 6000); // Wait 60 seconds before retrying\n// //       } else {\n// //         console.error('Error fetching stock data:', error);\n// //       }\n// //     }\n// //   };\n\n// //   useEffect(() => {\n// //     if (symbol) {\n// //       const interval = setInterval(() => {\n// //         fetchStockData(symbol);\n// //       }, 5000); // Fetch every second\n// //       return () => clearInterval(interval);\n// //     }\n// //   }, [symbol]);\n\n// //   const priceChart = {\n// //     labels: priceData.map((entry) => new Date(entry.t).toLocaleTimeString()),\n// //     datasets: [\n// //       {\n// //         label: 'Stock Price',\n// //         data: priceData.map((entry) => entry.c),\n// //         fill: false,\n// //         backgroundColor: 'rgba(75,192,192,0.4)',\n// //         borderColor: 'rgba(75,192,192,1)',\n// //       },\n// //     ],\n// //   };\n\n// //   const volumeChart = {\n// //     labels: volumeData.map((entry) => new Date(entry.expiration_date).toLocaleTimeString()),\n// //     datasets: [\n// //       {\n// //         label: 'Call Volume',\n// //         data: volumeData.map((entry) => entry.call_volume),\n// //         backgroundColor: 'rgba(54, 162, 235, 0.2)',\n// //         borderColor: 'rgba(54, 162, 235, 1)',\n// //         borderWidth: 1,\n// //       },\n// //       {\n// //         label: 'Put Volume',\n// //         data: volumeData.map((entry) => entry.put_volume),\n// //         backgroundColor: 'rgba(255, 99, 132, 0.2)',\n// //         borderColor: 'rgba(255, 99, 132, 1)',\n// //         borderWidth: 1,\n// //       },\n// //     ],\n// //   };\n\n// //   return (\n// //     <div>\n// //       <form onSubmit={handleSubmit}>\n// //         <input\n// //           type=\"text\"\n// //           placeholder=\"Enter Stock Symbol\"\n// //           value={symbol}\n// //           onChange={(e) => setSymbol(e.target.value.toUpperCase())}\n// //         />\n// //         <button type=\"submit\">Submit</button>\n// //       </form>\n\n// //       {priceData.length > 0 && (\n// //         <>\n// //           <h2>{symbol} Stock Price</h2>\n// //           <Line data={priceChart} />\n// //         </>\n// //       )}\n\n// //       {volumeData.length > 0 && (\n// //         <>\n// //           <h2>Volume Data</h2>\n// //           <Bar data={volumeChart} />\n// //         </>\n// //       )}\n\n// //       <button onClick={() => setToggleVolume(!toggleVolume)}>\n// //         {toggleVolume ? 'Show Volume' : 'Show $ Amount'}\n// //       </button>\n// //     </div>\n// //   );\n// // };\n\n// // export default StockTracker;\n\n// // import React, { useState, useEffect } from 'react';\n// // import axios from 'axios';\n// // import { Line, Bar } from 'react-chartjs-2';\n// // import 'chart.js/auto'; // Required for chart.js\n\n// // const StockTracker = () => {\n// //   const [symbol, setSymbol] = useState('');\n// //   const [priceData, setPriceData] = useState([]);\n// //   const [volumeData, setVolumeData] = useState([]);\n// //   const [strikeData, setStrikeData] = useState([]); // For storing strike prices with Greeks\n// //   const [toggleVolume, setToggleVolume] = useState(false); // Toggles between volume and $ amount\n\n// //   const handleSubmit = (e) => {\n// //     e.preventDefault();\n// //     fetchStockData(symbol);\n// //   };\n\n// //   const fetchStockData = async (symbol) => {\n// //     try {\n// //       const now = new Date();\n// //       const tenMinutesAgo = new Date(now.getTime() - 10 * 60 * 1000);\n// //       const fromDate = tenMinutesAgo.toISOString().split('T')[0];\n// //       const toDate = now.toISOString().split('T')[0];\n\n// //       // Fetch stock price data\n// //       const priceResponse = await axios.get(\n// //         `https://api.polygon.io/v2/aggs/ticker/${symbol}/range/1/minute/2024-09-20/2024-09-20?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\n// //       );\n\n// //       setPriceData(priceResponse.data.results || []);\n\n// //       // Fetch volume data for the closest expiry date\n// //       const volumeResponse = await axios.get(\n// //         `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${symbol}&contract_type=all&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\n// //       );\n\n// //       setVolumeData(volumeResponse.data.results || []);\n\n// //     //   // Fetch Greeks (Delta, Gamma, Vega) and Strike Prices for options 10 above/below\n// //     //   const strikeResponse = await axios.get(\n// //     //     `https://api.polygon.io/v1/reference/options/greeks/${symbol}?apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\n// //     //   );\n\n// //     //   setStrikeData(strikeResponse.data.results || []);\n\n// //     } catch (error) {\n// //       console.error('Error fetching stock data:', error);\n// //     }\n// //   };\n\n// //   useEffect(() => {\n// //     if (symbol) {\n// //       const interval = setInterval(() => {\n// //         fetchStockData(symbol);\n// //       }, 1000); // Fetch every second\n// //       return () => clearInterval(interval);\n// //     }\n// //   }, [symbol]);\n\n// //   // Function to calculate Dollar Amount based on Volume and Contract Price\n// //   const calculateDollarAmount = (volume, contractPrice) => volume * 100 * contractPrice;\n\n// //   const priceChart = {\n// //     labels: priceData.map((entry) => new Date(entry.t).toLocaleTimeString()),\n// //     datasets: [\n// //       {\n// //         label: 'Stock Price',\n// //         data: priceData.map((entry) => entry.c),\n// //         fill: false,\n// //         backgroundColor: 'rgba(75,192,192,0.4)',\n// //         borderColor: 'rgba(75,192,192,1)',\n// //       },\n// //     ],\n// //   };\n\n// //   const volumeChart = {\n// //     labels: volumeData.map((entry) => new Date(entry.expiration_date).toLocaleDateString()), // Using date for better accuracy\n// //     datasets: [\n// //       {\n// //         label: 'Call Volume',\n// //         data: volumeData.map((entry) => \n// //           toggleVolume ? calculateDollarAmount(entry.call_volume, entry.contract_price) : entry.call_volume),\n// //         backgroundColor: 'rgba(54, 162, 235, 0.2)',\n// //         borderColor: 'rgba(54, 162, 235, 1)',\n// //         borderWidth: 1,\n// //       },\n// //       {\n// //         label: 'Put Volume',\n// //         data: volumeData.map((entry) => \n// //           toggleVolume ? calculateDollarAmount(entry.put_volume, entry.contract_price) : entry.put_volume),\n// //         backgroundColor: 'rgba(255, 99, 132, 0.2)',\n// //         borderColor: 'rgba(255, 99, 132, 1)',\n// //         borderWidth: 1,\n// //       },\n// //     ],\n// //   };\n\n// //   // Function to calculate percentage movement using Greeks\n// //   const calculatePriceImpact = (greeks, priceChange) => {\n// //     const delta = greeks.delta || 0;\n// //     const gamma = greeks.gamma || 0;\n// //     return (delta + 0.5 * gamma * priceChange) * 100; // Simplified formula using Delta & Gamma\n// //   };\n\n// //   return (\n// //     <div>\n// //       <form onSubmit={handleSubmit}>\n// //         <input\n// //           type=\"text\"\n// //           placeholder=\"Enter Stock Symbol\"\n// //           value={symbol}\n// //           onChange={(e) => setSymbol(e.target.value.toUpperCase())}\n// //         />\n// //         <button type=\"submit\">Submit</button>\n// //       </form>\n\n// //       {priceData.length > 0 && (\n// //         <>\n// //           <h2>{symbol} Stock Price</h2>\n// //           <Line data={priceChart} />\n// //         </>\n// //       )}\n\n// //       {volumeData.length > 0 && (\n// //         <>\n// //           <h2>Volume Data</h2>\n// //           <Bar data={volumeChart} />\n// //         </>\n// //       )}\n\n// //       {strikeData.length > 0 && (\n// //         <>\n// //           <h2>Strike Price Data with Greeks</h2>\n// //           <ul>\n// //             {strikeData.map((strike) => (\n// //               <li key={strike.id}>\n// //                 Strike: {strike.strike_price}, Delta: {strike.delta}, \n// //                 Impact (+1%): {calculatePriceImpact(strike, 0.01)}%, \n// //                 Impact (-1%): {calculatePriceImpact(strike, -0.01)}%\n// //               </li>\n// //             ))}\n// //           </ul>\n// //         </>\n// //       )}\n\n// //       <button onClick={() => setToggleVolume(!toggleVolume)}>\n// //         {toggleVolume ? 'Show Volume' : 'Show $ Amount'}\n// //       </button>\n// //     </div>\n// //   );\n// // };\n\n// // export default StockTracker;\n\n// // import React, { useState, useEffect } from 'react';\n// // import axios from 'axios';\n// // import { Line, Bar } from 'react-chartjs-2';\n// // import 'chart.js/auto'; // Required for chart.js\n\n// // const StockTracker = () => {\n// //   const [symbol, setSymbol] = useState('');\n// //   const [priceData, setPriceData] = useState([]);\n// //   const [volumeData, setVolumeData] = useState([]);\n// //   const [strikeData, setStrikeData] = useState([]); // For storing strike prices with Greeks\n// //   const [toggleVolume, setToggleVolume] = useState(false); // Toggles between volume and $ amount\n\n// //   const handleSubmit = (e) => {\n// //     e.preventDefault();\n// //     fetchStockData(symbol);\n// //   };\n\n// //   const fetchStockData = async (symbol) => {\n// //     try {\n// //       const now = new Date();\n// //       const tenMinutesAgo = new Date(now.getTime() - 10 * 60 * 1000);\n// //       const fromDate = tenMinutesAgo.toISOString().split('T')[0];\n// //       const toDate = now.toISOString().split('T')[0];\n\n// //       // Fetch stock price data\n// //       const priceResponse = await axios.get(\n// //         `https://api.polygon.io/v2/aggs/ticker/${symbol}/range/1/minute/2024-09-20/${toDate}?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\n// //       );\n\n// //       setPriceData(priceResponse.data.results || []);\n\n// //       // Fetch volume data for the closest expiry date\n// //       const volumeResponse = await axios.get(\n// //         `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${symbol}&contract_type=all&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\n// //       );\n\n// //       setVolumeData(volumeResponse.data.results || []);\n\n// //     } catch (error) {\n// //       console.error('Error fetching stock data:', error);\n// //     }\n// //   };\n\n// //   useEffect(() => {\n// //     if (symbol) {\n// //       const interval = setInterval(() => {\n// //         fetchStockData(symbol);\n// //       }, 1000); // Fetch every second\n// //       return () => clearInterval(interval);\n// //     }\n// //   }, [symbol]);\n\n// //   // Function to calculate Dollar Amount based on Volume and Contract Price\n// //   const calculateDollarAmount = (volume, contractPrice) => volume * 100 * contractPrice;\n\n// //   // Price chart configuration\n// //   const priceChart = {\n// //     labels: priceData.map((entry) => new Date(entry.t).toLocaleTimeString()),\n// //     datasets: [\n// //       {\n// //         label: 'Stock Price',\n// //         data: priceData.map((entry) => entry.c),\n// //         fill: false,\n// //         backgroundColor: 'rgba(75,192,192,0.4)',\n// //         borderColor: 'rgba(75,192,192,1)',\n// //       },\n// //     ],\n// //   };\n\n// //   // Volume chart configuration with updated data based on `toggleVolume`\n// //   const volumeChart = {\n// //     labels: volumeData.map((entry) => new Date(entry.expiration_date).toLocaleTimeString()),\n// //     datasets: [\n// //       {\n// //         label: 'Call Volume',\n// //         data: volumeData.map((entry) =>\n// //           toggleVolume ? calculateDollarAmount(entry.call_volume, entry.contract_price) : entry.call_volume\n// //         ),\n// //         backgroundColor: 'rgba(54, 162, 235, 0.2)',\n// //         borderColor: 'rgba(54, 162, 235, 1)',\n// //         borderWidth: 1,\n// //       },\n// //       {\n// //         label: 'Put Volume',\n// //         data: volumeData.map((entry) =>\n// //           toggleVolume ? calculateDollarAmount(entry.put_volume, entry.contract_price) : entry.put_volume\n// //         ),\n// //         backgroundColor: 'rgba(255, 99, 132, 0.2)',\n// //         borderColor: 'rgba(255, 99, 132, 1)',\n// //         borderWidth: 1,\n// //       },\n// //     ],\n// //   };\n\n// //   // Function to calculate percentage movement using Greeks\n// //   const calculatePriceImpact = (greeks, priceChange) => {\n// //     const delta = greeks.delta || 0;\n// //     const gamma = greeks.gamma || 0;\n// //     return (delta + 0.5 * gamma * priceChange) * 100; // Simplified formula using Delta & Gamma\n// //   };\n\n// //   return (\n// //     <div>\n// //       <form onSubmit={handleSubmit}>\n// //         <input\n// //           type=\"text\"\n// //           placeholder=\"Enter Stock Symbol\"\n// //           value={symbol}\n// //           onChange={(e) => setSymbol(e.target.value.toUpperCase())}\n// //         />\n// //         <button type=\"submit\">Submit</button>\n// //       </form>\n\n// //       {priceData.length > 0 && (\n// //         <>\n// //           <h2>{symbol} Stock Price</h2>\n// //           <Line data={priceChart} />\n// //         </>\n// //       )}\n\n// //       {volumeData.length > 0 && (\n// //         <>\n// //           <h2>Volume Data</h2>\n// //           <Bar data={volumeChart} />\n// //         </>\n// //       )}\n\n// //       {strikeData.length > 0 && (\n// //         <>\n// //           <h2>Strike Price Data with Greeks</h2>\n// //           <ul>\n// //             {strikeData.map((strike) => (\n// //               <li key={strike.id}>\n// //                 Strike: {strike.strike_price}, Delta: {strike.delta}, \n// //                 Impact (+1%): {calculatePriceImpact(strike, 0.01)}%, \n// //                 Impact (-1%): {calculatePriceImpact(strike, -0.01)}%\n// //               </li>\n// //             ))}\n// //           </ul>\n// //         </>\n// //       )}\n\n// //       {/* Toggle Button */}\n// //       <button onClick={() => setToggleVolume(!toggleVolume)}>\n// //         {toggleVolume ? 'Show Volume' : 'Show $ Amount'}\n// //       </button>\n// //     </div>\n// //   );\n// // };\n\n// // export default StockTracker;\n\n// // import React, { useState, useEffect } from 'react';\n// // import axios from 'axios';\n// // import { Line, Bar } from 'react-chartjs-2';\n// // import 'chart.js/auto'; // Required for chart.js\n\n// // const StockTracker = () => {\n// //   const [symbol, setSymbol] = useState('');\n// //   const [priceData, setPriceData] = useState([]);\n// //   const [volumeData, setVolumeData] = useState([]);\n// //   const [strikeData, setStrikeData] = useState([]); // For storing strike prices with Greeks\n// //   const [toggleVolume, setToggleVolume] = useState(false); // Toggles between volume and $ amount\n\n// //   const handleSubmit = (e) => {\n// //     e.preventDefault();\n// //     fetchStockData(symbol);\n// //   };\n\n// //   const fetchStockData = async (symbol) => {\n// //     try {\n// //       const now = new Date();\n// //       const tenMinutesAgo = new Date(now.getTime() - 10 * 60 * 1000);\n// //       const fromDate = tenMinutesAgo.toISOString().split('T')[0];\n// //       const toDate = now.toISOString().split('T')[0];\n\n// //       // Fetch stock price data\n// //       const priceResponse = await axios.get(\n// //         `https://api.polygon.io/v2/aggs/ticker/${symbol}/range/1/minute/2024-09-20/${toDate}?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\n// //       );\n\n// //       setPriceData(priceResponse.data.results || []);\n\n// //       // Fetch volume data for the closest expiry date\n// //       const volumeResponse = await axios.get(\n// //         `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${symbol}&contract_type=all&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\n// //       );\n// //       console.log(volumeResponse.data.results);\n\n// //       setVolumeData(volumeResponse.data.results || []);\n\n// //     } catch (error) {\n// //       console.error('Error fetching stock data:', error);\n// //     }\n// //   };\n\n// //   useEffect(() => {\n// //     if (symbol) {\n// //       const interval = setInterval(() => {\n// //         fetchStockData(symbol);\n// //       }, 1000); // Fetch every second\n// //       return () => clearInterval(interval);\n// //     }\n// //   }, [symbol]);\n\n// //   // Function to calculate Dollar Amount based on Volume and Contract Price\n// //   const calculateDollarAmount = (volume, contractPrice) => volume * 100 * contractPrice;\n\n// //   // Price chart configuration\n// //   const priceChart = {\n// //     labels: priceData.map((entry) => new Date(entry.t).toLocaleTimeString()),\n// //     datasets: [\n// //       {\n// //         label: 'Stock Price',\n// //         data: priceData.map((entry) => entry.c),\n// //         fill: false,\n// //         backgroundColor: 'rgba(75,192,192,0.4)',\n// //         borderColor: 'rgba(75,192,192,1)',\n// //       },\n// //     ],\n// //   };\n\n// //   // Volume chart configuration with updated data based on `toggleVolume`\n// //   const volumeChart = {\n// //     labels: volumeData.map((entry) => new Date(entry.expiration_date).toLocaleTimeString()),\n// //     datasets: [\n// //       {\n// //         label: 'Call Volume',\n// //         data: volumeData.map((entry) =>\n// //           toggleVolume ? calculateDollarAmount(entry.call_volume, entry.contract_price) : entry.call_volume\n// //         ),\n// //         backgroundColor: 'rgba(54, 162, 235, 0.2)',\n// //         borderColor: 'rgba(54, 162, 235, 1)',\n// //         borderWidth: 1,\n// //       },\n// //       {\n// //         label: 'Put Volume',\n// //         data: volumeData.map((entry) =>\n// //           toggleVolume ? calculateDollarAmount(entry.put_volume, entry.contract_price) : entry.put_volume\n// //         ),\n// //         backgroundColor: 'rgba(255, 99, 132, 0.2)',\n// //         borderColor: 'rgba(255, 99, 132, 1)',\n// //         borderWidth: 1,\n// //       },\n// //     ],\n// //   };\n\n// //   // Function to calculate percentage movement using Greeks\n// //   const calculatePriceImpact = (greeks, priceChange) => {\n// //     const delta = greeks.delta || 0;\n// //     const gamma = greeks.gamma || 0;\n// //     return (delta + 0.5 * gamma * priceChange) * 100; // Simplified formula using Delta & Gamma\n// //   };\n\n// //   const handleToggleVolume = () => {\n// //     setToggleVolume((prevState) => {\n// //       const newToggleState = !prevState;\n// //       console.log('Toggle Volume Button Clicked: ', newToggleState);\n// //       console.log('Volume Data: ', volumeData);\n// //       console.log('Price Data: ', priceData);\n// //       return newToggleState;\n// //     });\n// //   };\n\n// //   return (\n// //     <div>\n// //       <form onSubmit={handleSubmit}>\n// //         <input\n// //           type=\"text\"\n// //           placeholder=\"Enter Stock Symbol\"\n// //           value={symbol}\n// //           onChange={(e) => setSymbol(e.target.value.toUpperCase())}\n// //         />\n// //         <button type=\"submit\">Submit</button>\n// //       </form>\n\n// //       {/* Display stock price graph */}\n// //       {priceData.length > 0 && (\n// //         <>\n// //           <h2>{symbol} Stock Price</h2>\n// //           <Line data={priceChart} />\n// //         </>\n// //       )}\n\n// //       {/* Display volume/dollar amount graph */}\n// //       {volumeData.length > 0 && (\n// //         <>\n// //           <h2>Volume Data</h2>\n// //           <Bar data={volumeChart} />\n// //         </>\n// //       )}\n\n// //       {/* Display strike data */}\n// //       {strikeData.length > 0 && (\n// //         <>\n// //           <h2>Strike Price Data with Greeks</h2>\n// //           <ul>\n// //             {strikeData.map((strike) => (\n// //               <li key={strike.id}>\n// //                 Strike: {strike.strike_price}, Delta: {strike.delta}, \n// //                 Impact (+1%): {calculatePriceImpact(strike, 0.01)}%, \n// //                 Impact (-1%): {calculatePriceImpact(strike, -0.01)}%\n// //               </li>\n// //             ))}\n// //           </ul>\n// //         </>\n// //       )}\n\n// //       {/* Toggle button to switch between volume and dollar amount */}\n// //       <button onClick={handleToggleVolume}>\n// //         {toggleVolume ? 'Show Volume' : 'Show $ Amount'}\n// //       </button>\n// //     </div>\n// //   );\n// // };\n\n// // export default StockTracker;\n\n// // import React, { useState, useEffect } from 'react';\n// // import axios from 'axios';\n// // import { Line, Bar } from 'react-chartjs-2';\n// // import 'chart.js/auto'; // Required for chart.js\n\n// // const StockTracker = () => {\n// //   const [symbol, setSymbol] = useState('');\n// //   const [priceData, setPriceData] = useState([]);\n// //   const [optionData, setOptionData] = useState([]); // For storing option data\n// //   const [toggleVolume, setToggleVolume] = useState(false); // Toggles between volume and $ amount\n\n// //   const handleSubmit = (e) => {\n// //     e.preventDefault();\n// //     fetchStockData(symbol);\n// //   };\n// // //   Right now the marrcket is c\n// // //   const fetchStockData = async (symbol) => {\n// // //     try {\n// // //       const now = new Date();\n// // //       const tenMinutesAgo = new Date(now.getTime() - 10 * 60 * 1000); // Fetching last 10 minutes of data\n// // //       const fromDate = tenMinutesAgo.toISOString().split('T')[0];\n// // //       const toDate = now.toISOString().split('T')[0];\n\n// // //       // Fetch stock price data\n// // //       const priceResponse = await axios.get(\n// // //         `https://api.polygon.io/v2/aggs/ticker/${symbol}/range/1/minute/${fromDate}/${toDate}?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\n// // //       );\n\n// // //       setPriceData(priceResponse.data.results || []);\n// // //     } catch (error) {\n// // //       console.error('Error fetching stock data:', error);\n// // //     }\n// // //   };\n\n// //   const fetchStockData = async (symbol) => {\n// //     try {\n// //       const now = new Date();\n// //       const tenMinutesAgo = new Date(now.getTime() - 10 * 60 * 1000);\n// //       const fromDate = tenMinutesAgo.toISOString().split('T')[0];\n// //       const toDate = now.toISOString().split('T')[0];\n\n// //       // Fetch stock price data\n// //       const priceResponse = await axios.get(\n// //         `https://api.polygon.io/v2/aggs/ticker/${symbol}/range/1/minute/2024-09-20/${toDate}?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\n// //       );\n\n// //       setPriceData(priceResponse.data.results || []);\n\n// //       // Fetch option data from your provided API URL\n// //       const optionResponse = await axios.get(\n// //         `https://api.polygon.io/v2/aggs/ticker/O:${symbol}251219C00650000/range/1/day/2024-09-10/${toDate}?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\n// //       );\n\n// //       setOptionData(optionResponse.data.results || []); // Store option data\n\n// //     } catch (error) {\n// //       console.error('Error fetching stock or option data:', error);\n// //     }\n// //   };\n\n// //   useEffect(() => {\n// //     if (symbol) {\n// //       const interval = setInterval(() => {\n// //         fetchStockData(symbol);\n// //       }, 1000); // Fetch every second\n// //       return () => clearInterval(interval);\n// //     }\n// //   }, [symbol]);\n\n// //   // Function to calculate Dollar Amount based on Volume and Contract Price\n// //   const calculateDollarAmount = (volume, contractPrice) => volume * 100 * contractPrice;\n\n// //   // Price chart configuration\n// //   const priceChart = {\n// //     labels: priceData.map((entry) => new Date(entry.t).toLocaleTimeString()),\n// //     datasets: [\n// //       {\n// //         label: 'Stock Price',\n// //         data: priceData.map((entry) => entry.c),\n// //         fill: false,\n// //         backgroundColor: 'rgba(75,192,192,0.4)',\n// //         borderColor: 'rgba(75,192,192,1)',\n// //       },\n// //     ],\n// //   };\n\n// //   // Function to toggle between showing volume or dollar amount in option chart\n// //   const handleToggleVolume = () => {\n// //     setToggleVolume((prevState) => !prevState);\n// //     console.log('Toggle Volume Button Clicked:', toggleVolume);\n// //   };\n\n// //   return (\n// //     <div>\n// //       <form onSubmit={handleSubmit}>\n// //         <input\n// //           type=\"text\"\n// //           placeholder=\"Enter Stock Symbol\"\n// //           value={symbol}\n// //           onChange={(e) => setSymbol(e.target.value.toUpperCase())}\n// //         />\n// //         <button type=\"submit\">Submit</button>\n// //       </form>\n\n// //       {/* Display stock price graph */}\n// //       {priceData.length > 0 && (\n// //         <>\n// //           <h2>{symbol} Stock Price</h2>\n// //           <Line data={priceChart} />\n// //         </>\n// //       )}\n\n// //     </div>\n// //   );\n// // };\n\n// // export default StockTracker;\n\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import { Line, Bar } from 'react-chartjs-2';\n// import 'chart.js/auto';\n\n// const StockOptionsTracker = () => {\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\n//   const [stockData, setStockData] = useState([]); // Stock price data\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\n//   const [loading, setLoading] = useState(false);\n//   const [error, setError] = useState(null);\n\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\n\n//   // Fetch stock data and options contracts\n//   useEffect(() => {\n//     const fetchStockDataAndOptions = async () => {\n//       setLoading(true);\n//       setError(null);\n//       try {\n//         // Fetch stock data for latest price\n//         const stockResponse = await axios.get(\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/prev?adjusted=true&apiKey=${polygonApiKey}`\n//         );\n//         const currentPrice = stockResponse.data.results[0].c;\n//         setStockPrice(currentPrice);\n\n//         // Fetch stock price data for charting\n//         const stockPriceResponse = await axios.get(\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\n//         );\n//         setStockData(stockPriceResponse.data.results || []);\n\n//         // Fetch options contracts for the soonest expiration\n//         const optionsResponse = await axios.get(\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\n//         );\n//         const contracts = optionsResponse.data.results || [];\n//         console.log(\"Contracts\",contracts);\n\n//         // Filter contracts based on strikes around current stock price (±10)\n//         const filteredContracts = contracts.filter(\n//           (contract) =>\n//             contract.expiration_date === '2024-09-27'\n//             // && contract.strike_price >= currentPrice - 5 && \n//             // contract.strike_price <= currentPrice + 5\n//         );\n//         console.log(\"Currunet Price\",currentPrice);\n//         console.log(\"Filtered Contracts\",filteredContracts);\n//         setOptionContracts(filteredContracts);\n\n//         // Fetch cumulative volume data for each contract\n//         const volumes = [];\n//         const timeLabels = [];\n//         for (let i = 0; i < filteredContracts.length; i++) {\n//           const contract = filteredContracts[i];\n//           const volumeResponse = await axios.get(\n//             `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\n//           );\n//           const volumeData = volumeResponse.data.results || [];\n//           console.log(\"Volume Data\",volumeData);\n\n//           // Set time labels once (for X-axis)\n//           if (i === 0 && volumeData.length > 0) {\n//             timeLabels.push(...volumeData.map(item => new Date(item.t).toLocaleTimeString()));\n//           }\n\n//           // Accumulate the volume for each minute across all contracts\n//           volumeData.forEach((item, index) => {\n//             volumes[index] = (volumes[index] || 0) + item.v;\n//           });\n//         }\n\n//         setCumulativeVolumes(volumes);\n//         setTimeLabels(timeLabels);\n//       } catch (err) {\n//         console.error('Error fetching data:', err);\n//         setError('Failed to load data');\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     fetchStockDataAndOptions();\n\n//     const interval = setInterval(() => {\n//       fetchStockDataAndOptions();\n//     }, 60000); // Update every 60 seconds\n\n//     return () => clearInterval(interval);\n//   }, [stockSymbol]);\n\n//   // Helper function to get today’s date\n//   const getTodayDate = () => {\n//     const today = new Date();\n//     return today.toISOString().split('T')[0];\n//   };\n\n//   // Line chart data for stock price\n//   const stockChartData = {\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\n//     datasets: [\n//       {\n//         label: 'Stock Price',\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\n//         borderColor: 'rgba(75,192,192,1)',\n//         backgroundColor: 'rgba(75,192,192,0.2)',\n//         fill: false,\n//         tension: 0.1,\n//       },\n//     ],\n//   };\n\n//   // Bar chart data for cumulative options volume\n//   const optionsVolumeChartData = {\n//     labels: timeLabels, // X-axis (time)\n//     datasets: [\n//       {\n//         label: 'Cumulative Volume',\n//         data: cumulativeVolumes, // Y-axis (volume)\n//         backgroundColor: 'rgba(75, 192, 192, 0.6)',\n//         borderColor: 'rgba(75, 192, 192, 1)',\n//         borderWidth: 1,\n//       },\n//     ],\n//   };\n\n//   return (\n//     <div style={{ padding: '20px' }}>\n//       <h2>Stock and Options Tracker</h2>\n\n//       <div style={{ marginBottom: '20px' }}>\n//         <label>\n//           Stock Symbol:\n//           <input\n//             type=\"text\"\n//             value={stockSymbol}\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\n//             style={{ marginLeft: '10px' }}\n//           />\n//         </label>\n//       </div>\n\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\n//       </button>\n\n//       {loading && <p>Loading data...</p>}\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\n\n//       <div style={{ marginTop: '30px' }}>\n//         <h3>Stock Price Data for {stockSymbol}</h3>\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\n\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Expiration Date 2024-09-27</h3>\n//         {cumulativeVolumes.length > 0 ? (\n//           <Bar data={optionsVolumeChartData} />\n//         ) : (\n//           <p>No cumulative volume data available</p>\n//         )}\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default StockOptionsTracker;\n\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import { Line, Bar } from 'react-chartjs-2';\n// import 'chart.js/auto';\n\n// const StockOptionsTracker = () => {\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\n//   const [stockData, setStockData] = useState([]); // Stock price data\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\n//   const [loading, setLoading] = useState(false);\n//   const [error, setError] = useState(null);\n\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\n\n//   // Fetch stock data and options contracts\n//   useEffect(() => {\n//     const fetchStockDataAndOptions = async () => {\n//       setLoading(true);\n//       setError(null);\n//       try {\n//         // Fetch stock data for latest price\n//         const stockResponse = await axios.get(\n//           `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`\n//         );\n//         const currentPrice = stockResponse.data.ticker.lastTrade.p;\n//         setStockPrice(currentPrice);\n\n//         // Fetch stock price data for charting\n//         const stockPriceResponse = await axios.get(\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\n//         );\n//         setStockData(stockPriceResponse.data.results || []);\n\n//         // Fetch options contracts for the soonest expiration\n//         const optionsResponse = await axios.get(\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\n//         );\n//         const contracts = optionsResponse.data.results || [];\n\n//         // Find the soonest expiration date\n//         const soonestExpiryDate = contracts\n//           .map(contract => contract.expiration_date)\n//           .sort()[0];\n\n//         console.log(\"Soonest Expiry Date\",soonestExpiryDate);\n\n//         // Filter contracts based on strikes around current stock price (±10)\n//         const sortedContracts = contracts.sort((a, b) => parseFloat(a.strike_price) - parseFloat(b.strike_price));\n\n//     // Find the closest strike price to the current price\n//     const closestContractIndex = sortedContracts.findIndex(contract => parseFloat(contract.strike_price) >= currentPrice);\n\n//     // Select 10 strikes below and 10 strikes above\n//     const start = Math.max(0, closestContractIndex - 10);\n//     const end = Math.min(sortedContracts.length, closestContractIndex + 10);\n//     const filteredContracts = sortedContracts.slice(start, end);\n\n//     console.log(\"Filtered Contracts (10 above and 10 below):\", filteredContracts); // Log filtered contracts\n//     setOptionContracts(filteredContracts);\n\n//         console.log(\"Currunet Price\",currentPrice);\n//         console.log(\"Filtered Contracts\",filteredContracts);\n\n//         // Fetch cumulative volume data for each contract\n//         if (filteredContracts.length > 0) {\n//             const volumes = [];\n//             const timeLabels = [];\n//             for (let i = 0; i < filteredContracts.length; i++) {\n//               const contract = filteredContracts[i];\n//               const volumeResponse = await axios.get(\n//                 `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\n//               );\n//               const volumeData = volumeResponse.data.results || [];\n//               console.log(\"Volume Data for contract\", contract.ticker, volumeData); // Log volume data for each contract\n\n//               // Set time labels once (for X-axis)\n//               if (i === 0 && volumeData.length > 0) {\n//                 timeLabels.push(...volumeData.map(item => new Date(item.t).toLocaleTimeString()));\n//               }\n\n//               // Accumulate the volume for each minute across all contracts\n//               volumeData.forEach((item, index) => {\n//                 volumes[index] = (volumes[index] || 0) + item.v;\n//               });\n//             }\n\n//             setCumulativeVolumes(volumes);\n//             setTimeLabels(timeLabels);\n//             }  else {\n//                 console.log(\"No contracts found within the 10 above and below strike price range.\");\n//               }\n\n//       } catch (err) {\n//         console.error('Error fetching data:', err);\n//         setError('Failed to load data');\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     fetchStockDataAndOptions();\n\n//     const interval = setInterval(() => {\n//       fetchStockDataAndOptions();\n//     }, 60000); // Update every 60 seconds\n\n//     return () => clearInterval(interval);\n//   }, [stockSymbol]);\n\n//   // Helper function to get today’s date\n//   const getTodayDate = () => {\n//     const today = new Date();\n//     return today.toISOString().split('T')[0];\n//   };\n\n//   // Line chart data for stock price\n//   const stockChartData = {\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\n//     datasets: [\n//       {\n//         label: 'Stock Price',\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\n//         borderColor: 'rgba(75,192,192,1)',\n//         backgroundColor: 'rgba(75,192,192,0.2)',\n//         fill: false,\n//         tension: 0.1,\n//       },\n//     ],\n//   };\n\n//   // Bar chart data for cumulative options volume\n//   const optionsVolumeChartData = {\n//     labels: timeLabels, // X-axis (time)\n//     datasets: [\n//       {\n//         label: 'Cumulative Volume',\n//         data: cumulativeVolumes, // Y-axis (volume)\n//         backgroundColor: 'rgba(75, 192, 192, 0.6)',\n//         borderColor: 'rgba(75, 192, 192, 1)',\n//         borderWidth: 1,\n//       },\n//     ],\n//   };\n\n//   return (\n//     <div style={{ padding: '20px' }}>\n//       <h2>Stock and Options Tracker</h2>\n\n//       <div style={{ marginBottom: '20px' }}>\n//         <label>\n//           Stock Symbol:\n//           <input\n//             type=\"text\"\n//             value={stockSymbol}\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\n//             style={{ marginLeft: '10px' }}\n//           />\n//         </label>\n//       </div>\n\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\n//       </button>\n\n//       {loading && <p>Loading data...</p>}\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\n\n//       <div style={{ marginTop: '30px' }}>\n//         <h3>Stock Price Data for {stockSymbol}</h3>\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\n\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Nearest Expiry</h3>\n//         {cumulativeVolumes.length > 0 ? (\n//           <Bar data={optionsVolumeChartData} />\n//         ) : (\n//           <p>No cumulative volume data available</p>\n//         )}\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default StockOptionsTracker;\n\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import { Line, Bar } from 'react-chartjs-2';\n// import 'chart.js/auto';\n\n// const StockOptionsTracker = () => {\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\n//   const [stockData, setStockData] = useState([]); // Stock price data\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\n//   const [loading, setLoading] = useState(false);\n//   const [error, setError] = useState(null);\n\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\n\n//   // Fetch stock data and options contracts\n//   useEffect(() => {\n//     const fetchStockDataAndOptions = async () => {\n//       setLoading(true);\n//       setError(null);\n//       try {\n//         // Fetch stock data for latest price\n//         const stockResponse = await axios.get(\n//           `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`\n//         );\n//         const currentPrice = stockResponse.data.ticker.lastTrade.p;\n//         setStockPrice(currentPrice);\n\n//         // Fetch stock price data for charting\n//         const stockPriceResponse = await axios.get(\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\n//         );\n//         setStockData(stockPriceResponse.data.results || []);\n\n//         // Fetch options contracts for the soonest expiration\n//         const optionsResponse = await axios.get(\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\n//         );\n//         const contracts = optionsResponse.data.results || [];\n\n//         // Find the soonest expiration date\n//         const soonestExpiryDate = contracts\n//           .map(contract => contract.expiration_date)\n//           .sort()[0];\n\n//         console.log(\"Soonest Expiry Date\", soonestExpiryDate);\n\n//         // Filter contracts based on strikes around current stock price (±10)\n//         const sortedContracts = contracts.sort((a, b) => parseFloat(a.strike_price) - parseFloat(b.strike_price));\n\n//         // Find the closest strike price to the current price\n//         const closestContractIndex = sortedContracts.findIndex(contract => parseFloat(contract.strike_price) >= currentPrice);\n\n//         // Select 10 strikes below and 10 strikes above\n//         const start = Math.max(0, closestContractIndex - 10);\n//         const end = Math.min(sortedContracts.length, closestContractIndex + 10);\n//         const filteredContracts = sortedContracts.slice(start, end);\n\n//         console.log(\"Filtered Contracts (10 above and 10 below):\", filteredContracts); // Log filtered contracts\n//         setOptionContracts(filteredContracts);\n\n//         console.log(\"Current Price\", currentPrice);\n//         console.log(\"Filtered Contracts\", filteredContracts);\n\n//         // Fetch cumulative volume data for each contract\n//         if (filteredContracts.length > 0) {\n//           const volumes = [];\n//           const timeLabels = [];\n//           for (let i = 0; i < filteredContracts.length; i++) {\n//             const contract = filteredContracts[i];\n//             const volumeResponse = await axios.get(\n//               `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\n//             );\n//             const volumeData = volumeResponse.data.results || [];\n//             console.log(\"Volume Data for contract\", contract.ticker, volumeData); // Log volume data for each contract\n\n//             // Set time labels once (for X-axis)\n//             if (i === 0 && volumeData.length > 0) {\n//               timeLabels.push(...volumeData.map(item => new Date(item.t).toLocaleTimeString()));\n//             }\n\n//             // Accumulate the volume for each minute across all contracts\n//             volumeData.forEach((item, index) => {\n//               volumes[index] = (volumes[index] || 0) + item.v;\n//             });\n//           }\n\n//           setCumulativeVolumes(volumes);\n//           setTimeLabels(timeLabels);\n//         } else {\n//           console.log(\"No contracts found within the 10 above and below strike price range.\");\n//         }\n\n//       } catch (err) {\n//         console.error('Error fetching data:', err);\n//         setError('Failed to load data');\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     fetchStockDataAndOptions();\n\n//     const interval = setInterval(() => {\n//       fetchStockDataAndOptions();\n//     }, 60000); // Update every 60 seconds\n\n//     return () => clearInterval(interval);\n//   }, [stockSymbol]);\n\n//   // Helper function to get today’s date\n//   const getTodayDate = () => {\n//     const today = new Date();\n//     return today.toISOString().split('T')[0];\n//   };\n\n//   // Line chart data for stock price\n//   const stockChartData = {\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\n//     datasets: [\n//       {\n//         label: 'Stock Price',\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\n//         borderColor: 'rgba(75,192,192,1)',\n//         backgroundColor: 'rgba(75,192,192,0.2)',\n//         fill: false,\n//         tension: 0.1,\n//       },\n//     ],\n//   };\n\n//   // Bar chart data for cumulative options volume\n//   const optionsVolumeChartData = {\n//     labels: timeLabels, // X-axis (time)\n//     datasets: [\n//       {\n//         label: 'Cumulative Volume',\n//         data: cumulativeVolumes, // Y-axis (volume)\n//         backgroundColor: 'rgba(75, 192, 192, 0.6)',\n//         borderColor: 'rgba(75, 192, 192, 1)',\n//         borderWidth: 1,\n//       },\n//     ],\n//   };\n\n//   return (\n//     <div style={{ padding: '20px' }}>\n//       <h2>Stock and Options Tracker</h2>\n\n//       <div style={{ marginBottom: '20px' }}>\n//         <label>\n//           Stock Symbol:\n//           <input\n//             type=\"text\"\n//             value={stockSymbol}\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\n//             style={{ marginLeft: '10px' }}\n//           />\n//         </label>\n//       </div>\n\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\n//       </button>\n\n//       {loading && <p>Loading data...</p>}\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\n\n//       <div style={{ marginTop: '30px' }}>\n//         <h3>Stock Price Data for {stockSymbol}</h3>\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\n\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Nearest Expiry</h3>\n//         {cumulativeVolumes.length > 0 ? (\n//           <Bar data={optionsVolumeChartData} />\n//         ) : (\n//           <p>No cumulative volume data available</p>\n//         )}\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default StockOptionsTracker;\n\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import { Line, Bar } from 'react-chartjs-2';\n// import 'chart.js/auto';\n\n// // Black-Scholes Greeks calculations\n// const blackScholesGreeks = (S, K, T, r, sigma, optionType) => {\n//     const d1 = (Math.log(S / K) + (r + (sigma ** 2) / 2) * T) / (sigma * Math.sqrt(T));\n//     const d2 = d1 - sigma * Math.sqrt(T);\n//     const phi = (x) => (1 / Math.sqrt(2 * Math.PI)) * Math.exp(-0.5 * x ** 2);\n\n//     const delta = optionType === 'call' ? phi(d1) : phi(d1) - 1;\n//     return { delta };\n//   };\n\n// const StockOptionsTracker = () => {\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\n//   const [stockData, setStockData] = useState([]); // Stock price data\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\n//   const [loading, setLoading] = useState(false);\n//   const [error, setError] = useState(null);\n\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\n\n//   // Fetch stock data and options contracts\n//   useEffect(() => {\n//     const fetchStockDataAndOptions = async () => {\n//       setLoading(true);\n//       setError(null);\n//       try {\n//         // Fetch stock data for latest price\n//         const stockResponse = await axios.get(\n//           `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`\n//         );\n//         const currentPrice = stockResponse.data.ticker.lastTrade.p;\n//         setStockPrice(currentPrice);\n\n//         // Fetch stock price data for charting\n//         const stockPriceResponse = await axios.get(\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\n//         );\n//         setStockData(stockPriceResponse.data.results || []);\n\n//         // Fetch options contracts for the soonest expiration\n//         const optionsResponse = await axios.get(\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\n//         );\n//         const contracts = optionsResponse.data.results || [];\n\n//         // Find the soonest expiration date\n//         const soonestExpiryDate = contracts\n//           .map(contract => contract.expiration_date)\n//           .sort()[0];\n\n//         console.log(\"Soonest Expiry Date\", soonestExpiryDate);\n\n//         // Filter contracts based on strikes around current stock price (±10)\n//         const sortedContracts = contracts.sort((a, b) => parseFloat(a.strike_price) - parseFloat(b.strike_price));\n\n//         // Find the closest strike price to the current price\n//         const closestContractIndex = sortedContracts.findIndex(contract => parseFloat(contract.strike_price) >= currentPrice);\n\n//         // Select 10 strikes below and 10 strikes above\n//         const start = Math.max(0, closestContractIndex - 10);\n//         const end = Math.min(sortedContracts.length, closestContractIndex + 10);\n//         const filteredContracts = sortedContracts.slice(start, end);\n\n//         console.log(\"Filtered Contracts (10 above and 10 below):\", filteredContracts); // Log filtered contracts\n//         setOptionContracts(filteredContracts);\n\n//         console.log(\"Current Price\", currentPrice);\n//         console.log(\"Filtered Contracts\", filteredContracts);\n\n//         // Fetch cumulative volume data for each contract\n//         if (filteredContracts.length > 0) {\n//           const volumes = [];\n//           const timeLabels = [];\n//           for (let i = 0; i < filteredContracts.length; i++) {\n//             const contract = filteredContracts[i];\n//             const volumeResponse = await axios.get(\n//               `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\n//             );\n//             const volumeData = volumeResponse.data.results || [];\n//             console.log(\"Volume Data for contract\", contract.ticker, volumeData); // Log volume data for each contract\n\n//             // Set time labels once (for X-axis)\n//             if (i === 0 && volumeData.length > 0) {\n//               timeLabels.push(...volumeData.map(item => new Date(item.t).toLocaleTimeString()));\n//             }\n\n//             // Accumulate the volume for each minute across all contracts\n//             volumeData.forEach((item, index) => {\n//               volumes[index] = (volumes[index] || 0) + item.v;\n//             });\n//           }\n\n//           setCumulativeVolumes(volumes);\n//           setTimeLabels(timeLabels);\n//         } else {\n//           console.log(\"No contracts found within the 10 above and below strike price range.\");\n//         }\n\n//       } catch (err) {\n//         console.error('Error fetching data:', err);\n//         setError('Failed to load data');\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     fetchStockDataAndOptions();\n\n//     const interval = setInterval(() => {\n//       fetchStockDataAndOptions();\n//     }, 60000); // Update every 60 seconds\n\n//     return () => clearInterval(interval);\n//   }, [stockSymbol]);\n\n//   // Helper function to get today’s date\n//   const getTodayDate = () => {\n//     const today = new Date();\n//     return today.toISOString().split('T')[0];\n//   };\n\n//   // Line chart data for stock price\n//   const stockChartData = {\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\n//     datasets: [\n//       {\n//         label: 'Stock Price',\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\n//         borderColor: 'rgba(75,192,192,1)',\n//         backgroundColor: 'rgba(75,192,192,0.2)',\n//         fill: false,\n//         tension: 0.1,\n//       },\n//     ],\n//   };\n\n//   // Bar chart data for cumulative options volume\n//   const optionsVolumeChartData = {\n//     labels: timeLabels, // X-axis (time)\n//     datasets: [\n//       {\n//         label: 'Cumulative Volume',\n//         data: cumulativeVolumes, // Y-axis (volume)\n//         backgroundColor: 'rgba(75, 192, 192, 0.6)',\n//         borderColor: 'rgba(75, 192, 192, 1)',\n//         borderWidth: 1,\n//       },\n//     ],\n//   };\n\n//   return (\n//     <div style={{ padding: '20px' }}>\n//       <h2>Stock and Options Tracker</h2>\n\n//       <div style={{ marginBottom: '20px' }}>\n//         <label>\n//           Stock Symbol:\n//           <input\n//             type=\"text\"\n//             value={stockSymbol}\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\n//             style={{ marginLeft: '10px' }}\n//           />\n//         </label>\n//       </div>\n\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\n//       </button>\n\n//       {loading && <p>Loading data...</p>}\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\n\n//       <div style={{ marginTop: '30px' }}>\n//         <h3>Stock Price Data for {stockSymbol}</h3>\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\n\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Nearest Expiry</h3>\n//         {cumulativeVolumes.length > 0 ? (\n//           <Bar data={optionsVolumeChartData} />\n//         ) : (\n//           <p>No cumulative volume data available</p>\n//         )}\n\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default StockOptionsTracker;\n\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import { Line, Bar } from 'react-chartjs-2';\n// import 'chart.js/auto';\n\n// // Black-Scholes Greeks calculations\n// const blackScholesGreeks = (S, K, T, r, sigma, optionType) => {\n//   const d1 = (Math.log(S / K) + (r + (sigma ** 2) / 2) * T) / (sigma * Math.sqrt(T));\n//   const d2 = d1 - sigma * Math.sqrt(T);\n//   const phi = (x) => (1 / Math.sqrt(2 * Math.PI)) * Math.exp(-0.5 * x ** 2);\n\n//   const delta = optionType === 'call' ? phi(d1) : phi(d1) - 1;\n//   return { delta };\n// };\n\n// const StockOptionsTracker = () => {\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\n//   const [stockData, setStockData] = useState([]); // Stock price data\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\n//   const [loading, setLoading] = useState(false);\n//   const [error, setError] = useState(null);\n\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\n\n//   // Fetch stock data and options contracts\n//   useEffect(() => {\n//     const fetchStockDataAndOptions = async () => {\n//       setLoading(true);\n//       setError(null);\n//       try {\n//         // Fetch stock data for latest price\n//         const stockResponse = await axios.get(\n//           `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`\n//         );\n//         const currentPrice = stockResponse.data.ticker.lastTrade.p;\n//         setStockPrice(currentPrice);\n\n//         // Fetch stock price data for charting\n//         const stockPriceResponse = await axios.get(\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\n//         );\n//         setStockData(stockPriceResponse.data.results || []);\n\n//         // Fetch options contracts for the soonest expiration\n//         const optionsResponse = await axios.get(\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\n//         );\n//         const contracts = optionsResponse.data.results || [];\n\n//         // Find the soonest expiration date\n//         const soonestExpiryDate = contracts\n//           .map(contract => contract.expiration_date)\n//           .sort()[0];\n\n//         console.log(\"Soonest Expiry Date\", soonestExpiryDate);\n\n//         // Filter contracts based on strikes around current stock price (±10)\n//         const sortedContracts = contracts.sort((a, b) => parseFloat(a.strike_price) - parseFloat(b.strike_price));\n\n//         // Find the closest strike price to the current price\n//         const closestContractIndex = sortedContracts.findIndex(contract => parseFloat(contract.strike_price) >= currentPrice);\n\n//         // Select 10 strikes below and 10 strikes above\n//         const start = Math.max(0, closestContractIndex - 10);\n//         const end = Math.min(sortedContracts.length, closestContractIndex + 10);\n//         const filteredContracts = sortedContracts.slice(start, end);\n\n//         console.log(\"Filtered Contracts (10 above and 10 below):\", filteredContracts); // Log filtered contracts\n//         setOptionContracts(filteredContracts);\n\n//         console.log(\"Current Price\", currentPrice);\n//         console.log(\"Filtered Contracts\", filteredContracts);\n\n//         // Fetch cumulative volume data for each contract\n//         if (filteredContracts.length > 0) {\n//           const volumes = [];\n//           const timeLabels = [];\n//           for (let i = 0; i < filteredContracts.length; i++) {\n//             const contract = filteredContracts[i];\n//             const volumeResponse = await axios.get(\n//               `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\n//             );\n//             const volumeData = volumeResponse.data.results || [];\n//             console.log(\"Volume Data for contract\", contract.ticker, volumeData); // Log volume data for each contract\n\n//             // Set time labels once (for X-axis)\n//             if (i === 0 && volumeData.length > 0) {\n//               timeLabels.push(...volumeData.map(item => new Date(item.t).toLocaleTimeString()));\n//             }\n\n//             // Accumulate the volume for each minute across all contracts\n//             volumeData.forEach((item, index) => {\n//               volumes[index] = (volumes[index] || 0) + item.v;\n//             });\n//           }\n\n//           setCumulativeVolumes(volumes);\n//           setTimeLabels(timeLabels);\n//         } else {\n//           console.log(\"No contracts found within the 10 above and below strike price range.\");\n//         }\n\n//       } catch (err) {\n//         console.error('Error fetching data:', err);\n//         setError('Failed to load data');\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     fetchStockDataAndOptions();\n\n//     const interval = setInterval(() => {\n//       fetchStockDataAndOptions();\n//     }, 60000); // Update every 60 seconds\n\n//     return () => clearInterval(interval);\n//   }, [stockSymbol]);\n\n//   // Helper function to get today’s date\n//   const getTodayDate = () => {\n//     const today = new Date();\n//     return today.toISOString().split('T')[0];\n//   };\n\n//   // Line chart data for stock price\n//   const stockChartData = {\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\n//     datasets: [\n//       {\n//         label: 'Stock Price',\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\n//         borderColor: 'rgba(75,192,192,1)',\n//         backgroundColor: 'rgba(75,192,192,0.2)',\n//         fill: false,\n//         tension: 0.1,\n//       },\n//     ],\n//   };\n\n//   // Bar chart data for cumulative options volume\n//   const optionsVolumeChartData = {\n//     labels: timeLabels, // X-axis (time)\n//     datasets: [\n//       {\n//         label: isDollarMode ? 'Cumulative Dollar Amount' : 'Cumulative Volume',\n//         data: cumulativeVolumes.map((volume, index) =>\n//           isDollarMode ? volume * 100 * stockPrice : volume\n//         ), // Convert to dollar amount if isDollarMode is true\n//         backgroundColor: 'rgba(75, 192, 192, 0.6)',\n//         borderColor: 'rgba(75, 192, 192, 1)',\n//         borderWidth: 1,\n//       },\n//     ],\n//   };\n\n//   return (\n//     <div style={{ padding: '20px' }}>\n//       <h2>Stock and Options Tracker</h2>\n\n//       <div style={{ marginBottom: '20px' }}>\n//         <label>\n//           Stock Symbol:\n//           <input\n//             type=\"text\"\n//             value={stockSymbol}\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\n//             style={{ marginLeft: '10px' }}\n//           />\n//         </label>\n//       </div>\n\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\n//       </button>\n\n//       {loading && <p>Loading data...</p>}\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\n\n//       <div style={{ marginTop: '30px' }}>\n//         <h3>Stock Price Data for {stockSymbol}</h3>\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\n\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Nearest Expiry</h3>\n//         {cumulativeVolumes.length > 0 ? (\n//           <Bar data={optionsVolumeChartData} />\n//         ) : (\n//           <p>No cumulative volume data available</p>\n//         )}\n\n//         <h3 style={{ marginTop: '40px' }}>Option Chain with 1% Move Estimation</h3>\n//         {optionContracts.length > 0 ? (\n//           <table>\n//             <thead>\n//               <tr>\n//                 <th>Strike</th>\n//                 <th>Call LTP</th>\n//                 <th>Put LTP</th>\n//                 <th>IV</th>\n//                 <th>1% Up Estimation</th>\n//                 <th>1% Down Estimation</th>\n//               </tr>\n//             </thead>\n//             <tbody>\n//               {optionContracts.map((contract, index) => {\n//                 const T = (new Date(contract.expiration_date).getTime() - new Date().getTime()) / (365 * 24 * 60 * 60 * 1000); // Time to expiration in years\n//                 const greeks = blackScholesGreeks(\n//                   stockPrice,\n//                   parseFloat(contract.strike_price),\n//                   T,\n//                   0.05, // Assuming 5% risk-free rate\n//                   parseFloat(contract.implied_volatility) / 100,\n//                   'call'\n//                 );\n//                 const delta = greeks.delta;\n//                 const moveUp = stockPrice * 1.01;\n//                 const moveDown = stockPrice * 0.99;\n\n//                 return (\n//                   <tr key={index}>\n//                     <td>{contract.strike_price}</td>\n//                     <td>{contract.call_last_traded_price}</td>\n//                     <td>{contract.put_last_traded_price}</td>\n//                     <td>{contract.implied_volatility}%</td>\n//                     <td>{moveUp.toFixed(2)}</td>\n//                     <td>{moveDown.toFixed(2)}</td>\n//                   </tr>\n//                 );\n//               })}\n//             </tbody>\n//           </table>\n//         ) : (\n//           <p>No option contracts available</p>\n//         )}\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default StockOptionsTracker;\n\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import { Line, Bar } from 'react-chartjs-2';\n// import 'chart.js/auto';\n\n// // Black-Scholes Greeks calculations\n// const blackScholesGreeks = (S, K, T, r, sigma, optionType) => {\n//     const d1 = (Math.log(S / K) + (r + (sigma ** 2) / 2) * T) / (sigma * Math.sqrt(T));\n//     const d2 = d1 - sigma * Math.sqrt(T);\n//     const phi = (x) => (1 / Math.sqrt(2 * Math.PI)) * Math.exp(-0.5 * x ** 2);\n\n//     // Greeks calculations\n//     const delta = optionType === 'call' ? phi(d1) : phi(d1) - 1;\n//     const vega = S * Math.sqrt(T) * phi(d1); // Vega represents the sensitivity to volatility\n//     const gamma = phi(d1) / (S * sigma * Math.sqrt(T)); // Gamma for sensitivity to delta changes\n\n//     return { delta, gamma, vega };\n//   };\n\n// const StockOptionsTracker = () => {\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\n//   const [stockData, setStockData] = useState([]); // Stock price data\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\n//   const [loading, setLoading] = useState(false);\n//   const [error, setError] = useState(null);\n\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\n\n//   // Fetch stock data and options contracts\n//   useEffect(() => {\n//     const fetchStockDataAndOptions = async () => {\n//       setLoading(true);\n//       setError(null);\n//       try {\n//         // Fetch stock data for latest price\n//         const stockResponse = await axios.get(\n//           `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`\n//         );\n//         const currentPrice = stockResponse.data.ticker.lastTrade.p;\n//         setStockPrice(currentPrice);\n\n//         // Fetch stock price data for charting\n//         const stockPriceResponse = await axios.get(\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-20/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\n//         );\n//         setStockData(stockPriceResponse.data.results || []);\n\n//         // Fetch options contracts for the soonest expiration\n//         const optionsResponse = await axios.get(\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\n//         );\n//         const contracts = optionsResponse.data.results || [];\n\n//         // Find the soonest expiration date\n//         const soonestExpiryDate = contracts\n//           .map(contract => contract.expiration_date)\n//           .sort()[0];\n\n//         // Filter contracts based on strikes around current stock price (±10)\n//         const sortedContracts = contracts.sort((a, b) => parseFloat(a.strike_price) - parseFloat(b.strike_price));\n\n//         // Find the closest strike price to the current price\n//         const closestContractIndex = sortedContracts.findIndex(contract => parseFloat(contract.strike_price) >= currentPrice);\n\n//         // Select 10 strikes below and 10 strikes above\n//         const start = Math.max(0, closestContractIndex - 10);\n//         const end = Math.min(sortedContracts.length, closestContractIndex + 10);\n//         const filteredContracts = sortedContracts.slice(start, end);\n\n//         setOptionContracts(filteredContracts);\n\n//         // Fetch cumulative volume data for each contract\n//         if (filteredContracts.length > 0) {\n//             const volumes = [];\n//             let timeLabels = [];\n\n//             try {\n//               // Create an array of promises to fetch the volume data for all contracts concurrently\n//               const volumePromises = filteredContracts.map(async (contract, index) => {\n//                 const volumeResponse = await axios.get(\n//                   `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\n//                 );\n\n//                 const volumeData = volumeResponse.data.results || [];\n\n//                 // Set time labels only for the first contract's volume data\n//                 if (index === 0 && volumeData.length > 0) {\n//                   timeLabels = volumeData.map(item => new Date(item.t).toLocaleTimeString());\n//                 }\n\n//                 // Return the volume data for further processing\n//                 return volumeData;\n//               });\n\n//               // Wait for all the promises to resolve concurrently\n//               const resolvedVolumes = await Promise.all(volumePromises);\n\n//               // Process the resolved volume data and accumulate volumes per minute\n//               resolvedVolumes.forEach(volumeData => {\n//                 volumeData.forEach((item, index) => {\n//                   volumes[index] = (volumes[index] || 0) + item.v;\n//                 });\n//               });\n\n//               // Update the state with accumulated volumes and time labels\n//               setCumulativeVolumes(volumes);\n//               setTimeLabels(timeLabels);\n\n//             } catch (error) {\n//               console.error('Error fetching cumulative volume data:', error);\n//             }\n//           }\n\n//       } catch (err) {\n//         console.error('Error fetching data:', err);\n//         setError('Failed to load data');\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     fetchStockDataAndOptions();\n\n//     const interval = setInterval(() => {\n//       fetchStockDataAndOptions();\n//     }, 60000); // Update every 60 seconds\n\n//     return () => clearInterval(interval);\n//   }, [stockSymbol]);\n\n//   // Helper function to get today’s date\n//   const getTodayDate = () => {\n//     const today = new Date();\n//     return today.toISOString().split('T')[0];\n//   };\n\n//   // Line chart data for stock price\n//   const stockChartData = {\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\n//     datasets: [\n//       {\n//         label: 'Stock Price',\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\n//         borderColor: 'rgba(75,192,192,1)',\n//         backgroundColor: 'rgba(75,192,192,0.2)',\n//         fill: false,\n//         tension: 0.1,\n//       },\n//     ],\n//   };\n\n//   // Bar chart data for cumulative options volume\n//   const optionsVolumeChartData = {\n//     labels: timeLabels, // X-axis (time)\n//     datasets: [\n//       {\n//         label: isDollarMode ? 'Cumulative Dollar Amount' : 'Cumulative Volume',\n//         data: cumulativeVolumes.map((volume, index) =>\n//           isDollarMode ? volume * 100 * stockPrice : volume\n//         ), // Convert to dollar amount if isDollarMode is true\n//         backgroundColor: 'rgba(75, 192, 192, 0.6)',\n//         borderColor: 'rgba(75, 192, 192, 1)',\n//         borderWidth: 1,\n//       },\n//     ],\n//   };\n\n//   return (\n//     <div style={{ padding: '20px' }}>\n//       <h2>Stock and Options Tracker</h2>\n\n//       <div style={{ marginBottom: '20px' }}>\n//         <label>\n//           Stock Symbol:\n//           <input\n//             type=\"text\"\n//             value={stockSymbol}\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\n//             style={{ marginLeft: '10px' }}\n//           />\n//         </label>\n//       </div>\n\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\n//       </button>\n\n//       {loading && <p>Loading data...</p>}\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\n\n//       <div style={{ marginTop: '30px' }}>\n//         <h3>Stock Price Data for {stockSymbol}</h3>\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\n\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Nearest Expiry</h3>\n//         {cumulativeVolumes.length > 0 ? (\n//           <Bar data={optionsVolumeChartData} />\n//         ) : (\n//           <p>No cumulative volume data available</p>\n//         )}\n\n//         <h3 style={{ marginTop: '40px' }}>Option Chain with 1% Move Estimation</h3>\n//         {optionContracts.length > 0 ? (\n//           <table>\n//             <thead>\n//               <tr>\n//                 <th>Strike</th>\n//                 <th>IV</th>\n//                 <th>1% Up Estimation</th>\n//                 <th>1% Down Estimation</th>\n//               </tr>\n//             </thead>\n//             <tbody>\n//               {optionContracts.map((contract, index) => {\n//                 const T = (new Date(contract.expiration_date).getTime() - new Date().getTime()) / (365 * 24 * 60 * 60 * 1000); // Time to expiration in years\n//                 const greeks = blackScholesGreeks(\n//                   stockPrice,\n//                   parseFloat(contract.strike_price),\n//                   T,\n//                   0.05, // Assuming 5% risk-free rate\n//                   contract.iv / 100,\n//                   contract.option_type\n//                 );\n\n//                 return (\n//                   <tr key={index}>\n//                     <td>{contract.strike_price}</td>\n//                     <td>{contract.iv}</td>\n//                     <td>{(greeks.delta * 1.01).toFixed(2)}</td>\n//                     <td>{(greeks.delta * 0.99).toFixed(2)}</td>\n//                   </tr>\n//                 );\n//               })}\n//             </tbody>\n//           </table>\n//         ) : (\n//           <p>No options contracts data available</p>\n//         )}\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default StockOptionsTracker;\n\n// import React, { useState, useEffect } from 'react';\n// import axios from 'axios';\n// import { Line, Bar } from 'react-chartjs-2';\n// import 'chart.js/auto';\n\n// const StockOptionsTracker = () => {\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\n//   const [stockData, setStockData] = useState([]); // Stock price data\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\n//   const [putsVolumes, setPutsVolumes] = useState([]); // Cumulative puts volume data\n//   const [callsVolumes, setCallsVolumes] = useState([]); // Cumulative calls volume data\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\n//   const [loading, setLoading] = useState(false);\n//   const [error, setError] = useState(null);\n\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\n\n//   // Fetch stock data and options contracts\n//   useEffect(() => {\n//     const fetchStockDataAndOptions = async () => {\n//       setLoading(true);\n//       setError(null);\n//       try {\n//         // Fetch stock data for latest price\n//         const stockResponse = await axios.get(\n//           `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`\n//         );\n//         const currentPrice = stockResponse.data.ticker.lastTrade.p;\n//         setStockPrice(currentPrice);\n\n//         // Fetch stock price data for charting\n//         const stockPriceResponse = await axios.get(\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-20/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\n//         );\n//         setStockData(stockPriceResponse.data.results || []);\n\n//         // Fetch options contracts for the soonest expiration\n//         const optionsResponse = await axios.get(\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\n//         );\n//         const contracts = optionsResponse.data.results || [];\n\n//         // Find the soonest expiration date\n//         const soonestExpiryDate = contracts\n//           .map(contract => contract.expiration_date)\n//           .sort()[0];\n\n//         // Filter contracts based on strikes around current stock price (±10)\n//         const sortedContracts = contracts.sort((a, b) => parseFloat(a.strike_price) - parseFloat(b.strike_price));\n\n//         // Find the closest strike price to the current price\n//         const closestContractIndex = sortedContracts.findIndex(contract => parseFloat(contract.strike_price) >= currentPrice);\n\n//         // Select 10 strikes below and 10 strikes above\n//         const start = Math.max(0, closestContractIndex - 10);\n//         const end = Math.min(sortedContracts.length, closestContractIndex + 10);\n//         const filteredContracts = sortedContracts.slice(start, end);\n\n//         setOptionContracts(filteredContracts);\n\n//         // Fetch cumulative volume data for each contract\n//         if (filteredContracts.length > 0) {\n//             const puts = [];\n//             const calls = [];\n//             const volumes = [];\n//             let timeLabels = [];\n\n//             try {\n//               // Create an array of promises to fetch the volume data for all contracts concurrently\n//               const volumePromises = filteredContracts.map(async (contract, index) => {\n//                 const volumeResponse = await axios.get(\n//                   `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\n//                 );\n\n//                 const volumeData = volumeResponse.data.results || [];\n\n//                 // Set time labels only for the first contract's volume data\n//                 if (index === 0 && volumeData.length > 0) {\n//                   timeLabels = volumeData.map(item => new Date(item.t).toLocaleTimeString());\n//                 }\n\n//                 // Store volumes for puts and calls\n//                 if (contract.contract_type === 'put') {\n//                   volumeData.forEach(item => {\n//                     puts.push(item.v);\n//                   });\n//                 } else if (contract.contract_type === 'call') {\n//                   volumeData.forEach(item => {\n//                     calls.push(item.v);\n//                   });\n//                 }\n\n//                 // Return the volume data for further processing\n//                 return volumeData;\n//               });\n\n//               // Wait for all the promises to resolve concurrently\n//               await Promise.all(volumePromises);\n\n//               // Process the resolved volume data and accumulate volumes\n//               setPutsVolumes(puts);\n//               setCallsVolumes(calls);\n//               setCumulativeVolumes(volumes);\n//               setTimeLabels(timeLabels);\n\n//             } catch (error) {\n//               console.error('Error fetching cumulative volume data:', error);\n//             }\n//           }\n\n//       } catch (err) {\n//         console.error('Error fetching data:', err);\n//         setError('Failed to load data');\n//       } finally {\n//         setLoading(false);\n//       }\n//     };\n\n//     fetchStockDataAndOptions();\n\n//     const interval = setInterval(() => {\n//       fetchStockDataAndOptions();\n//     }, 60000); // Update every 60 seconds\n\n//     return () => clearInterval(interval);\n//   }, [stockSymbol]);\n\n//   // Helper function to get today’s date\n//   const getTodayDate = () => {\n//     const today = new Date();\n//     return today.toISOString().split('T')[0];\n//   };\n\n//   // Line chart data for stock price\n//   const stockChartData = {\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\n//     datasets: [\n//       {\n//         label: 'Stock Price',\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\n//         borderColor: 'rgba(75,192,192,1)',\n//         backgroundColor: 'rgba(75,192,192,0.2)',\n//         fill: false,\n//         tension: 0.1,\n//       },\n//     ],\n//   };\n\n//   // Bar chart data for cumulative options volume\n//   const optionsVolumeChartData = {\n//     labels: timeLabels, // X-axis (time)\n//     datasets: [\n//       {\n//         label: isDollarMode ? 'Cumulative Dollar Amount' : 'Cumulative Volume (Puts)',\n//         data: putsVolumes.map((volume) => (isDollarMode ? volume * 100 * stockPrice : volume)),\n//         backgroundColor: 'rgba(255, 99, 132, 0.6)',\n//         borderColor: 'rgba(255, 99, 132, 1)',\n//         borderWidth: 1,\n//       },\n//       {\n//         label: isDollarMode ? 'Cumulative Dollar Amount' : 'Cumulative Volume (Calls)',\n//         data: callsVolumes.map((volume) => (isDollarMode ? volume * 100 * stockPrice : volume)),\n//         backgroundColor: 'rgba(54, 162, 235, 0.6)',\n//         borderColor: 'rgba(54, 162, 235, 1)',\n//         borderWidth: 1,\n//       },\n//     ],\n//   };\n\n//   return (\n//     <div style={{ padding: '20px' }}>\n//       <h2>Stock and Options Tracker</h2>\n\n//       <div style={{ marginBottom: '20px' }}>\n//         <label>\n//           Stock Symbol:\n//           <input\n//             type=\"text\"\n//             value={stockSymbol}\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\n//             style={{ marginLeft: '10px' }}\n//           />\n//         </label>\n//       </div>\n\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\n//       </button>\n\n//       {loading && <p>Loading data...</p>}\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\n\n//       <div style={{ marginTop: '30px' }}>\n//         <h3>Stock Price Data for {stockSymbol}</h3>\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\n\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Nearest Expiry</h3>\n//         {putsVolumes.length > 0 || callsVolumes.length > 0 ? (\n//           <Bar data={optionsVolumeChartData} />\n//         ) : (\n//           <p>No cumulative volume data available</p>\n//         )}\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default StockOptionsTracker;\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Line, Bar } from 'react-chartjs-2';\nimport 'chart.js/auto';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StockOptionsTracker = () => {\n  _s();\n  const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\n  const [stockPrice, setStockPrice] = useState(0); // Latest stock price\n  const [stockData, setStockData] = useState([]); // Stock price data\n  const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\n  const [putsVolumes, setPutsVolumes] = useState([]); // Cumulative puts volume data\n  const [callsVolumes, setCallsVolumes] = useState([]); // Cumulative calls volume data\n  const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\n  const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\n\n  // Fetch stock data and options contracts\n  useEffect(() => {\n    const fetchStockDataAndOptions = async () => {\n      setLoading(true);\n      setError(null);\n      try {\n        // Fetch stock data for the latest price\n        const stockResponse = await axios.get(`https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`);\n        const currentPrice = stockResponse.data.ticker.lastTrade.p;\n        setStockPrice(currentPrice);\n\n        // Fetch stock price data for charting\n        const stockPriceResponse = await axios.get(`https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-20/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`);\n        setStockData(stockPriceResponse.data.results || []);\n\n        // Fetch options data dynamically based on stock's current price\n        const strikesResponse = await axios.get(`https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`);\n        const expirationDate = '2024-09-27'; // Example expiration date\n        const soonestExpiry = strikesResponse.data.results.reduce((prev, curr) => {\n          return new Date(curr.expiration_date) < new Date(prev.expiration_date) ? curr : prev;\n        }, strikesResponse.data.results[0]).expiration_date;\n        const strikesForExpiry = strikesResponse.data.results.filter(contract => contract.expiration_date === soonestExpiry);\n        const strikes = strikesForExpiry.map(contract => contract.strike_price);\n        console.log('All Strikes:', strikes); // Log all strikes\n        // Find 10 strikes closest to the current price (5 above and 5 below)\n        const closestStrikes = strikes.filter(strike => Math.abs(strike - currentPrice) <= 50).sort((a, b) => Math.abs(a - currentPrice) - Math.abs(b - currentPrice)).slice(0, 10);\n        console.log('Closest Strikes:', closestStrikes); // Log closest strikes\n\n        // Fetch option volumes for these strikes\n        const volumePromises = strikes.flatMap(strike => ['call', 'put'].map(async contractType => {\n          const response = await axios.get(`https://api.polygon.io/v3/snapshot/options/${stockSymbol}?strike_price=${strike}&expiration_date=${expirationDate}&contract_type=${contractType}&order=asc&limit=10&sort=strike_price&apiKey=${polygonApiKey}`);\n          return response.data.results || [];\n        }));\n\n        // Wait for all promises to resolve\n        const allVolumes = await Promise.all(volumePromises);\n        console.log('All Volumes:', allVolumes); // Log all volumes\n\n        // Process the data to accumulate volumes\n        const puts = [];\n        const calls = [];\n        let timeLabels = [];\n        allVolumes.forEach(resultList => {\n          resultList.forEach(contract => {\n            if (contract.details.contract_type === 'put') {\n              puts.push(contract.day.volume);\n            } else if (contract.details.contract_type === 'call') {\n              calls.push(contract.day.volume);\n            }\n            if (timeLabels.length === 0 && contract.day.last_updated) {\n              const timestamp = contract.day.last_updated / 1e9; // Convert nanoseconds to seconds\n              timeLabels.push(new Date(timestamp * 1000).toLocaleTimeString());\n            }\n          });\n        });\n        console.log('Puts:', puts); // Log puts volumes\n        console.log('Calls:', calls); // Log calls volumes\n\n        setPutsVolumes(puts);\n        setCallsVolumes(calls);\n        setTimeLabels(timeLabels);\n      } catch (err) {\n        console.error('Error fetching data:', err);\n        setError('Failed to load data');\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchStockDataAndOptions();\n    const interval = setInterval(() => {\n      fetchStockDataAndOptions();\n    }, 60000); // Update every 60 seconds\n\n    return () => clearInterval(interval);\n  }, [stockSymbol]);\n\n  // Helper function to get today’s date\n  const getTodayDate = () => {\n    const today = new Date();\n    return today.toISOString().split('T')[0];\n  };\n\n  // Line chart data for stock price\n  const stockChartData = {\n    labels: stockData.map(item => new Date(item.t).toLocaleTimeString()),\n    // X-axis (time)\n    datasets: [{\n      label: 'Stock Price',\n      data: stockData.map(item => item.c),\n      // Y-axis (stock price)\n      borderColor: 'rgba(75,192,192,1)',\n      backgroundColor: 'rgba(75,192,192,0.2)',\n      fill: false,\n      tension: 0.1\n    }]\n  };\n\n  // Bar chart data for cumulative options volume\n  const optionsVolumeChartData = {\n    labels: timeLabels,\n    // X-axis (time)\n    datasets: [{\n      label: isDollarMode ? 'Cumulative Dollar Amount' : 'Cumulative Volume (Puts)',\n      data: putsVolumes.map(volume => isDollarMode ? volume * 100 * stockPrice : volume),\n      backgroundColor: 'rgba(255, 99, 132, 0.6)',\n      borderColor: 'rgba(255, 99, 132, 1)',\n      borderWidth: 1\n    }, {\n      label: isDollarMode ? 'Cumulative Dollar Amount' : 'Cumulative Volume (Calls)',\n      data: callsVolumes.map(volume => isDollarMode ? volume * 100 * stockPrice : volume),\n      backgroundColor: 'rgba(54, 162, 235, 0.6)',\n      borderColor: 'rgba(54, 162, 235, 1)',\n      borderWidth: 1\n    }]\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: '20px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Stock and Options Tracker\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2355,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '20px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Stock Symbol:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: stockSymbol,\n          onChange: e => setStockSymbol(e.target.value.toUpperCase()),\n          style: {\n            marginLeft: '10px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 2360,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2358,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2357,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setIsDollarMode(!isDollarMode),\n      children: isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2369,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading data...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2373,\n      columnNumber: 19\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 2374,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '30px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Stock Price Data for \", stockSymbol]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 2377,\n        columnNumber: 9\n      }, this), stockData.length > 0 ? /*#__PURE__*/_jsxDEV(Line, {\n        data: stockChartData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2378,\n        columnNumber: 33\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No stock data available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2378,\n        columnNumber: 66\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginTop: '40px'\n        },\n        children: \"Options Cumulative Volume for Nearest Expiry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2380,\n        columnNumber: 9\n      }, this), putsVolumes.length > 0 || callsVolumes.length > 0 ? /*#__PURE__*/_jsxDEV(Bar, {\n        data: optionsVolumeChartData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2382,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No cumulative volume data available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 2384,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 2376,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 2354,\n    columnNumber: 5\n  }, this);\n};\n_s(StockOptionsTracker, \"XWXbDjLv2NN7gCP/zvZbVMNfz0k=\");\n_c = StockOptionsTracker;\nexport default StockOptionsTracker;\nvar _c;\n$RefreshReg$(_c, \"StockOptionsTracker\");","map":{"version":3,"names":["React","useState","useEffect","axios","Line","Bar","jsxDEV","_jsxDEV","StockOptionsTracker","_s","stockSymbol","setStockSymbol","stockPrice","setStockPrice","stockData","setStockData","optionContracts","setOptionContracts","putsVolumes","setPutsVolumes","callsVolumes","setCallsVolumes","timeLabels","setTimeLabels","isDollarMode","setIsDollarMode","loading","setLoading","error","setError","polygonApiKey","fetchStockDataAndOptions","stockResponse","get","currentPrice","data","ticker","lastTrade","p","stockPriceResponse","getTodayDate","results","strikesResponse","expirationDate","soonestExpiry","reduce","prev","curr","Date","expiration_date","strikesForExpiry","filter","contract","strikes","map","strike_price","console","log","closestStrikes","strike","Math","abs","sort","a","b","slice","volumePromises","flatMap","contractType","response","allVolumes","Promise","all","puts","calls","forEach","resultList","details","contract_type","push","day","volume","length","last_updated","timestamp","toLocaleTimeString","err","interval","setInterval","clearInterval","today","toISOString","split","stockChartData","labels","item","t","datasets","label","c","borderColor","backgroundColor","fill","tension","optionsVolumeChartData","borderWidth","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","marginBottom","type","value","onChange","e","target","toUpperCase","marginLeft","onClick","color","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/HP/Desktop/polygon_without_ws/stock-tracker/src/components/StockTracker.js"],"sourcesContent":["// // import React, { useState, useEffect } from 'react';\r\n// // import axios from 'axios';\r\n// // import { Line, Bar } from 'react-chartjs-2';\r\n// // import 'chart.js/auto'; // Required for chart.js\r\n\r\n// // const StockTracker = () => {\r\n// //   const [symbol, setSymbol] = useState('');\r\n// //   const [priceData, setPriceData] = useState([]);\r\n// //   const [volumeData, setVolumeData] = useState([]);\r\n// //   const [contractData, setContractData] = useState([]);\r\n// //   const [toggleVolume, setToggleVolume] = useState(false); // Toggles between volume and dollar amount\r\n\r\n// //   const handleSubmit = (e) => {\r\n// //     e.preventDefault();\r\n// //     fetchStockData(symbol);\r\n// //   };\r\n\r\n// //   const fetchStockData = async (symbol) => {\r\n// //     try {\r\n// //       const now = new Date();\r\n// //       const tenMinutesAgo = new Date(now.getTime() - 10 * 60 * 1000);\r\n      \r\n// //       // Convert to YYYY-MM-DD format as required by Polygon API\r\n// //       const fromDate = tenMinutesAgo.toISOString().split('T')[0]; \r\n// //       const toDate = now.toISOString().split('T')[0]; \r\n  \r\n// //       // Fetch stock price data\r\n// //       const priceResponse = await axios.get(\r\n// //         `https://api.polygon.io/v2/aggs/ticker/${symbol}/range/1/minute/2024-09-20/2024-09-22?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\r\n// //       );\r\n      \r\n// //       console.log(\"Price Response\",priceResponse.data.results);\r\n// //       setPriceData(priceResponse.data.results || []); // Update your price data state\r\n  \r\n// //       // Fetch volume data for the closest expiry date\r\n// //       const volumeResponse = await axios.get(\r\n// //         `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${symbol}&contract_type=all&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\r\n// //       );\r\n// //       console.log(volumeResponse.data.results);\r\n  \r\n// //       setVolumeData(volumeResponse.data.results || []); // Update your volume data state\r\n// //     } catch (error) {\r\n// //       if (error.response && error.response.status === 429) {\r\n// //         // Handle rate limiting (Too Many Requests)\r\n// //         console.error(\"Rate limit exceeded. Please wait or upgrade your subscription.\");\r\n        \r\n// //         // Implement a retry after a delay (e.g., 60 seconds)\r\n// //         setTimeout(() => {\r\n// //           fetchStockData(symbol); // Retry fetching data after 60 seconds\r\n// //         }, 6000); // Wait 60 seconds before retrying\r\n// //       } else {\r\n// //         console.error('Error fetching stock data:', error);\r\n// //       }\r\n// //     }\r\n// //   };\r\n  \r\n\r\n// //   useEffect(() => {\r\n// //     if (symbol) {\r\n// //       const interval = setInterval(() => {\r\n// //         fetchStockData(symbol);\r\n// //       }, 5000); // Fetch every second\r\n// //       return () => clearInterval(interval);\r\n// //     }\r\n// //   }, [symbol]);\r\n\r\n// //   const priceChart = {\r\n// //     labels: priceData.map((entry) => new Date(entry.t).toLocaleTimeString()),\r\n// //     datasets: [\r\n// //       {\r\n// //         label: 'Stock Price',\r\n// //         data: priceData.map((entry) => entry.c),\r\n// //         fill: false,\r\n// //         backgroundColor: 'rgba(75,192,192,0.4)',\r\n// //         borderColor: 'rgba(75,192,192,1)',\r\n// //       },\r\n// //     ],\r\n// //   };\r\n\r\n// //   const volumeChart = {\r\n// //     labels: volumeData.map((entry) => new Date(entry.expiration_date).toLocaleTimeString()),\r\n// //     datasets: [\r\n// //       {\r\n// //         label: 'Call Volume',\r\n// //         data: volumeData.map((entry) => entry.call_volume),\r\n// //         backgroundColor: 'rgba(54, 162, 235, 0.2)',\r\n// //         borderColor: 'rgba(54, 162, 235, 1)',\r\n// //         borderWidth: 1,\r\n// //       },\r\n// //       {\r\n// //         label: 'Put Volume',\r\n// //         data: volumeData.map((entry) => entry.put_volume),\r\n// //         backgroundColor: 'rgba(255, 99, 132, 0.2)',\r\n// //         borderColor: 'rgba(255, 99, 132, 1)',\r\n// //         borderWidth: 1,\r\n// //       },\r\n// //     ],\r\n// //   };\r\n\r\n// //   return (\r\n// //     <div>\r\n// //       <form onSubmit={handleSubmit}>\r\n// //         <input\r\n// //           type=\"text\"\r\n// //           placeholder=\"Enter Stock Symbol\"\r\n// //           value={symbol}\r\n// //           onChange={(e) => setSymbol(e.target.value.toUpperCase())}\r\n// //         />\r\n// //         <button type=\"submit\">Submit</button>\r\n// //       </form>\r\n\r\n// //       {priceData.length > 0 && (\r\n// //         <>\r\n// //           <h2>{symbol} Stock Price</h2>\r\n// //           <Line data={priceChart} />\r\n// //         </>\r\n// //       )}\r\n\r\n// //       {volumeData.length > 0 && (\r\n// //         <>\r\n// //           <h2>Volume Data</h2>\r\n// //           <Bar data={volumeChart} />\r\n// //         </>\r\n// //       )}\r\n\r\n// //       <button onClick={() => setToggleVolume(!toggleVolume)}>\r\n// //         {toggleVolume ? 'Show Volume' : 'Show $ Amount'}\r\n// //       </button>\r\n// //     </div>\r\n// //   );\r\n// // };\r\n\r\n// // export default StockTracker;\r\n\r\n// // import React, { useState, useEffect } from 'react';\r\n// // import axios from 'axios';\r\n// // import { Line, Bar } from 'react-chartjs-2';\r\n// // import 'chart.js/auto'; // Required for chart.js\r\n\r\n// // const StockTracker = () => {\r\n// //   const [symbol, setSymbol] = useState('');\r\n// //   const [priceData, setPriceData] = useState([]);\r\n// //   const [volumeData, setVolumeData] = useState([]);\r\n// //   const [strikeData, setStrikeData] = useState([]); // For storing strike prices with Greeks\r\n// //   const [toggleVolume, setToggleVolume] = useState(false); // Toggles between volume and $ amount\r\n\r\n// //   const handleSubmit = (e) => {\r\n// //     e.preventDefault();\r\n// //     fetchStockData(symbol);\r\n// //   };\r\n\r\n// //   const fetchStockData = async (symbol) => {\r\n// //     try {\r\n// //       const now = new Date();\r\n// //       const tenMinutesAgo = new Date(now.getTime() - 10 * 60 * 1000);\r\n// //       const fromDate = tenMinutesAgo.toISOString().split('T')[0];\r\n// //       const toDate = now.toISOString().split('T')[0];\r\n  \r\n// //       // Fetch stock price data\r\n// //       const priceResponse = await axios.get(\r\n// //         `https://api.polygon.io/v2/aggs/ticker/${symbol}/range/1/minute/2024-09-20/2024-09-20?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\r\n// //       );\r\n      \r\n// //       setPriceData(priceResponse.data.results || []);\r\n  \r\n// //       // Fetch volume data for the closest expiry date\r\n// //       const volumeResponse = await axios.get(\r\n// //         `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${symbol}&contract_type=all&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\r\n// //       );\r\n  \r\n// //       setVolumeData(volumeResponse.data.results || []);\r\n\r\n// //     //   // Fetch Greeks (Delta, Gamma, Vega) and Strike Prices for options 10 above/below\r\n// //     //   const strikeResponse = await axios.get(\r\n// //     //     `https://api.polygon.io/v1/reference/options/greeks/${symbol}?apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\r\n// //     //   );\r\n  \r\n// //     //   setStrikeData(strikeResponse.data.results || []);\r\n      \r\n// //     } catch (error) {\r\n// //       console.error('Error fetching stock data:', error);\r\n// //     }\r\n// //   };\r\n  \r\n// //   useEffect(() => {\r\n// //     if (symbol) {\r\n// //       const interval = setInterval(() => {\r\n// //         fetchStockData(symbol);\r\n// //       }, 1000); // Fetch every second\r\n// //       return () => clearInterval(interval);\r\n// //     }\r\n// //   }, [symbol]);\r\n\r\n// //   // Function to calculate Dollar Amount based on Volume and Contract Price\r\n// //   const calculateDollarAmount = (volume, contractPrice) => volume * 100 * contractPrice;\r\n\r\n// //   const priceChart = {\r\n// //     labels: priceData.map((entry) => new Date(entry.t).toLocaleTimeString()),\r\n// //     datasets: [\r\n// //       {\r\n// //         label: 'Stock Price',\r\n// //         data: priceData.map((entry) => entry.c),\r\n// //         fill: false,\r\n// //         backgroundColor: 'rgba(75,192,192,0.4)',\r\n// //         borderColor: 'rgba(75,192,192,1)',\r\n// //       },\r\n// //     ],\r\n// //   };\r\n\r\n// //   const volumeChart = {\r\n// //     labels: volumeData.map((entry) => new Date(entry.expiration_date).toLocaleDateString()), // Using date for better accuracy\r\n// //     datasets: [\r\n// //       {\r\n// //         label: 'Call Volume',\r\n// //         data: volumeData.map((entry) => \r\n// //           toggleVolume ? calculateDollarAmount(entry.call_volume, entry.contract_price) : entry.call_volume),\r\n// //         backgroundColor: 'rgba(54, 162, 235, 0.2)',\r\n// //         borderColor: 'rgba(54, 162, 235, 1)',\r\n// //         borderWidth: 1,\r\n// //       },\r\n// //       {\r\n// //         label: 'Put Volume',\r\n// //         data: volumeData.map((entry) => \r\n// //           toggleVolume ? calculateDollarAmount(entry.put_volume, entry.contract_price) : entry.put_volume),\r\n// //         backgroundColor: 'rgba(255, 99, 132, 0.2)',\r\n// //         borderColor: 'rgba(255, 99, 132, 1)',\r\n// //         borderWidth: 1,\r\n// //       },\r\n// //     ],\r\n// //   };\r\n\r\n// //   // Function to calculate percentage movement using Greeks\r\n// //   const calculatePriceImpact = (greeks, priceChange) => {\r\n// //     const delta = greeks.delta || 0;\r\n// //     const gamma = greeks.gamma || 0;\r\n// //     return (delta + 0.5 * gamma * priceChange) * 100; // Simplified formula using Delta & Gamma\r\n// //   };\r\n\r\n// //   return (\r\n// //     <div>\r\n// //       <form onSubmit={handleSubmit}>\r\n// //         <input\r\n// //           type=\"text\"\r\n// //           placeholder=\"Enter Stock Symbol\"\r\n// //           value={symbol}\r\n// //           onChange={(e) => setSymbol(e.target.value.toUpperCase())}\r\n// //         />\r\n// //         <button type=\"submit\">Submit</button>\r\n// //       </form>\r\n\r\n// //       {priceData.length > 0 && (\r\n// //         <>\r\n// //           <h2>{symbol} Stock Price</h2>\r\n// //           <Line data={priceChart} />\r\n// //         </>\r\n// //       )}\r\n\r\n// //       {volumeData.length > 0 && (\r\n// //         <>\r\n// //           <h2>Volume Data</h2>\r\n// //           <Bar data={volumeChart} />\r\n// //         </>\r\n// //       )}\r\n\r\n// //       {strikeData.length > 0 && (\r\n// //         <>\r\n// //           <h2>Strike Price Data with Greeks</h2>\r\n// //           <ul>\r\n// //             {strikeData.map((strike) => (\r\n// //               <li key={strike.id}>\r\n// //                 Strike: {strike.strike_price}, Delta: {strike.delta}, \r\n// //                 Impact (+1%): {calculatePriceImpact(strike, 0.01)}%, \r\n// //                 Impact (-1%): {calculatePriceImpact(strike, -0.01)}%\r\n// //               </li>\r\n// //             ))}\r\n// //           </ul>\r\n// //         </>\r\n// //       )}\r\n\r\n// //       <button onClick={() => setToggleVolume(!toggleVolume)}>\r\n// //         {toggleVolume ? 'Show Volume' : 'Show $ Amount'}\r\n// //       </button>\r\n// //     </div>\r\n// //   );\r\n// // };\r\n\r\n// // export default StockTracker;\r\n\r\n// // import React, { useState, useEffect } from 'react';\r\n// // import axios from 'axios';\r\n// // import { Line, Bar } from 'react-chartjs-2';\r\n// // import 'chart.js/auto'; // Required for chart.js\r\n\r\n// // const StockTracker = () => {\r\n// //   const [symbol, setSymbol] = useState('');\r\n// //   const [priceData, setPriceData] = useState([]);\r\n// //   const [volumeData, setVolumeData] = useState([]);\r\n// //   const [strikeData, setStrikeData] = useState([]); // For storing strike prices with Greeks\r\n// //   const [toggleVolume, setToggleVolume] = useState(false); // Toggles between volume and $ amount\r\n\r\n// //   const handleSubmit = (e) => {\r\n// //     e.preventDefault();\r\n// //     fetchStockData(symbol);\r\n// //   };\r\n\r\n// //   const fetchStockData = async (symbol) => {\r\n// //     try {\r\n// //       const now = new Date();\r\n// //       const tenMinutesAgo = new Date(now.getTime() - 10 * 60 * 1000);\r\n// //       const fromDate = tenMinutesAgo.toISOString().split('T')[0];\r\n// //       const toDate = now.toISOString().split('T')[0];\r\n\r\n// //       // Fetch stock price data\r\n// //       const priceResponse = await axios.get(\r\n// //         `https://api.polygon.io/v2/aggs/ticker/${symbol}/range/1/minute/2024-09-20/${toDate}?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\r\n// //       );\r\n\r\n// //       setPriceData(priceResponse.data.results || []);\r\n\r\n// //       // Fetch volume data for the closest expiry date\r\n// //       const volumeResponse = await axios.get(\r\n// //         `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${symbol}&contract_type=all&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\r\n// //       );\r\n\r\n// //       setVolumeData(volumeResponse.data.results || []);\r\n      \r\n// //     } catch (error) {\r\n// //       console.error('Error fetching stock data:', error);\r\n// //     }\r\n// //   };\r\n\r\n// //   useEffect(() => {\r\n// //     if (symbol) {\r\n// //       const interval = setInterval(() => {\r\n// //         fetchStockData(symbol);\r\n// //       }, 1000); // Fetch every second\r\n// //       return () => clearInterval(interval);\r\n// //     }\r\n// //   }, [symbol]);\r\n\r\n// //   // Function to calculate Dollar Amount based on Volume and Contract Price\r\n// //   const calculateDollarAmount = (volume, contractPrice) => volume * 100 * contractPrice;\r\n\r\n// //   // Price chart configuration\r\n// //   const priceChart = {\r\n// //     labels: priceData.map((entry) => new Date(entry.t).toLocaleTimeString()),\r\n// //     datasets: [\r\n// //       {\r\n// //         label: 'Stock Price',\r\n// //         data: priceData.map((entry) => entry.c),\r\n// //         fill: false,\r\n// //         backgroundColor: 'rgba(75,192,192,0.4)',\r\n// //         borderColor: 'rgba(75,192,192,1)',\r\n// //       },\r\n// //     ],\r\n// //   };\r\n\r\n// //   // Volume chart configuration with updated data based on `toggleVolume`\r\n// //   const volumeChart = {\r\n// //     labels: volumeData.map((entry) => new Date(entry.expiration_date).toLocaleTimeString()),\r\n// //     datasets: [\r\n// //       {\r\n// //         label: 'Call Volume',\r\n// //         data: volumeData.map((entry) =>\r\n// //           toggleVolume ? calculateDollarAmount(entry.call_volume, entry.contract_price) : entry.call_volume\r\n// //         ),\r\n// //         backgroundColor: 'rgba(54, 162, 235, 0.2)',\r\n// //         borderColor: 'rgba(54, 162, 235, 1)',\r\n// //         borderWidth: 1,\r\n// //       },\r\n// //       {\r\n// //         label: 'Put Volume',\r\n// //         data: volumeData.map((entry) =>\r\n// //           toggleVolume ? calculateDollarAmount(entry.put_volume, entry.contract_price) : entry.put_volume\r\n// //         ),\r\n// //         backgroundColor: 'rgba(255, 99, 132, 0.2)',\r\n// //         borderColor: 'rgba(255, 99, 132, 1)',\r\n// //         borderWidth: 1,\r\n// //       },\r\n// //     ],\r\n// //   };\r\n\r\n// //   // Function to calculate percentage movement using Greeks\r\n// //   const calculatePriceImpact = (greeks, priceChange) => {\r\n// //     const delta = greeks.delta || 0;\r\n// //     const gamma = greeks.gamma || 0;\r\n// //     return (delta + 0.5 * gamma * priceChange) * 100; // Simplified formula using Delta & Gamma\r\n// //   };\r\n\r\n// //   return (\r\n// //     <div>\r\n// //       <form onSubmit={handleSubmit}>\r\n// //         <input\r\n// //           type=\"text\"\r\n// //           placeholder=\"Enter Stock Symbol\"\r\n// //           value={symbol}\r\n// //           onChange={(e) => setSymbol(e.target.value.toUpperCase())}\r\n// //         />\r\n// //         <button type=\"submit\">Submit</button>\r\n// //       </form>\r\n\r\n// //       {priceData.length > 0 && (\r\n// //         <>\r\n// //           <h2>{symbol} Stock Price</h2>\r\n// //           <Line data={priceChart} />\r\n// //         </>\r\n// //       )}\r\n\r\n// //       {volumeData.length > 0 && (\r\n// //         <>\r\n// //           <h2>Volume Data</h2>\r\n// //           <Bar data={volumeChart} />\r\n// //         </>\r\n// //       )}\r\n\r\n// //       {strikeData.length > 0 && (\r\n// //         <>\r\n// //           <h2>Strike Price Data with Greeks</h2>\r\n// //           <ul>\r\n// //             {strikeData.map((strike) => (\r\n// //               <li key={strike.id}>\r\n// //                 Strike: {strike.strike_price}, Delta: {strike.delta}, \r\n// //                 Impact (+1%): {calculatePriceImpact(strike, 0.01)}%, \r\n// //                 Impact (-1%): {calculatePriceImpact(strike, -0.01)}%\r\n// //               </li>\r\n// //             ))}\r\n// //           </ul>\r\n// //         </>\r\n// //       )}\r\n\r\n// //       {/* Toggle Button */}\r\n// //       <button onClick={() => setToggleVolume(!toggleVolume)}>\r\n// //         {toggleVolume ? 'Show Volume' : 'Show $ Amount'}\r\n// //       </button>\r\n// //     </div>\r\n// //   );\r\n// // };\r\n\r\n// // export default StockTracker;\r\n\r\n// // import React, { useState, useEffect } from 'react';\r\n// // import axios from 'axios';\r\n// // import { Line, Bar } from 'react-chartjs-2';\r\n// // import 'chart.js/auto'; // Required for chart.js\r\n\r\n// // const StockTracker = () => {\r\n// //   const [symbol, setSymbol] = useState('');\r\n// //   const [priceData, setPriceData] = useState([]);\r\n// //   const [volumeData, setVolumeData] = useState([]);\r\n// //   const [strikeData, setStrikeData] = useState([]); // For storing strike prices with Greeks\r\n// //   const [toggleVolume, setToggleVolume] = useState(false); // Toggles between volume and $ amount\r\n\r\n// //   const handleSubmit = (e) => {\r\n// //     e.preventDefault();\r\n// //     fetchStockData(symbol);\r\n// //   };\r\n\r\n// //   const fetchStockData = async (symbol) => {\r\n// //     try {\r\n// //       const now = new Date();\r\n// //       const tenMinutesAgo = new Date(now.getTime() - 10 * 60 * 1000);\r\n// //       const fromDate = tenMinutesAgo.toISOString().split('T')[0];\r\n// //       const toDate = now.toISOString().split('T')[0];\r\n\r\n// //       // Fetch stock price data\r\n// //       const priceResponse = await axios.get(\r\n// //         `https://api.polygon.io/v2/aggs/ticker/${symbol}/range/1/minute/2024-09-20/${toDate}?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\r\n// //       );\r\n\r\n// //       setPriceData(priceResponse.data.results || []);\r\n\r\n// //       // Fetch volume data for the closest expiry date\r\n// //       const volumeResponse = await axios.get(\r\n// //         `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${symbol}&contract_type=all&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\r\n// //       );\r\n// //       console.log(volumeResponse.data.results);\r\n\r\n// //       setVolumeData(volumeResponse.data.results || []);\r\n      \r\n// //     } catch (error) {\r\n// //       console.error('Error fetching stock data:', error);\r\n// //     }\r\n// //   };\r\n\r\n// //   useEffect(() => {\r\n// //     if (symbol) {\r\n// //       const interval = setInterval(() => {\r\n// //         fetchStockData(symbol);\r\n// //       }, 1000); // Fetch every second\r\n// //       return () => clearInterval(interval);\r\n// //     }\r\n// //   }, [symbol]);\r\n\r\n// //   // Function to calculate Dollar Amount based on Volume and Contract Price\r\n// //   const calculateDollarAmount = (volume, contractPrice) => volume * 100 * contractPrice;\r\n\r\n// //   // Price chart configuration\r\n// //   const priceChart = {\r\n// //     labels: priceData.map((entry) => new Date(entry.t).toLocaleTimeString()),\r\n// //     datasets: [\r\n// //       {\r\n// //         label: 'Stock Price',\r\n// //         data: priceData.map((entry) => entry.c),\r\n// //         fill: false,\r\n// //         backgroundColor: 'rgba(75,192,192,0.4)',\r\n// //         borderColor: 'rgba(75,192,192,1)',\r\n// //       },\r\n// //     ],\r\n// //   };\r\n\r\n// //   // Volume chart configuration with updated data based on `toggleVolume`\r\n// //   const volumeChart = {\r\n// //     labels: volumeData.map((entry) => new Date(entry.expiration_date).toLocaleTimeString()),\r\n// //     datasets: [\r\n// //       {\r\n// //         label: 'Call Volume',\r\n// //         data: volumeData.map((entry) =>\r\n// //           toggleVolume ? calculateDollarAmount(entry.call_volume, entry.contract_price) : entry.call_volume\r\n// //         ),\r\n// //         backgroundColor: 'rgba(54, 162, 235, 0.2)',\r\n// //         borderColor: 'rgba(54, 162, 235, 1)',\r\n// //         borderWidth: 1,\r\n// //       },\r\n// //       {\r\n// //         label: 'Put Volume',\r\n// //         data: volumeData.map((entry) =>\r\n// //           toggleVolume ? calculateDollarAmount(entry.put_volume, entry.contract_price) : entry.put_volume\r\n// //         ),\r\n// //         backgroundColor: 'rgba(255, 99, 132, 0.2)',\r\n// //         borderColor: 'rgba(255, 99, 132, 1)',\r\n// //         borderWidth: 1,\r\n// //       },\r\n// //     ],\r\n// //   };\r\n\r\n// //   // Function to calculate percentage movement using Greeks\r\n// //   const calculatePriceImpact = (greeks, priceChange) => {\r\n// //     const delta = greeks.delta || 0;\r\n// //     const gamma = greeks.gamma || 0;\r\n// //     return (delta + 0.5 * gamma * priceChange) * 100; // Simplified formula using Delta & Gamma\r\n// //   };\r\n\r\n// //   const handleToggleVolume = () => {\r\n// //     setToggleVolume((prevState) => {\r\n// //       const newToggleState = !prevState;\r\n// //       console.log('Toggle Volume Button Clicked: ', newToggleState);\r\n// //       console.log('Volume Data: ', volumeData);\r\n// //       console.log('Price Data: ', priceData);\r\n// //       return newToggleState;\r\n// //     });\r\n// //   };\r\n\r\n// //   return (\r\n// //     <div>\r\n// //       <form onSubmit={handleSubmit}>\r\n// //         <input\r\n// //           type=\"text\"\r\n// //           placeholder=\"Enter Stock Symbol\"\r\n// //           value={symbol}\r\n// //           onChange={(e) => setSymbol(e.target.value.toUpperCase())}\r\n// //         />\r\n// //         <button type=\"submit\">Submit</button>\r\n// //       </form>\r\n\r\n// //       {/* Display stock price graph */}\r\n// //       {priceData.length > 0 && (\r\n// //         <>\r\n// //           <h2>{symbol} Stock Price</h2>\r\n// //           <Line data={priceChart} />\r\n// //         </>\r\n// //       )}\r\n\r\n// //       {/* Display volume/dollar amount graph */}\r\n// //       {volumeData.length > 0 && (\r\n// //         <>\r\n// //           <h2>Volume Data</h2>\r\n// //           <Bar data={volumeChart} />\r\n// //         </>\r\n// //       )}\r\n\r\n// //       {/* Display strike data */}\r\n// //       {strikeData.length > 0 && (\r\n// //         <>\r\n// //           <h2>Strike Price Data with Greeks</h2>\r\n// //           <ul>\r\n// //             {strikeData.map((strike) => (\r\n// //               <li key={strike.id}>\r\n// //                 Strike: {strike.strike_price}, Delta: {strike.delta}, \r\n// //                 Impact (+1%): {calculatePriceImpact(strike, 0.01)}%, \r\n// //                 Impact (-1%): {calculatePriceImpact(strike, -0.01)}%\r\n// //               </li>\r\n// //             ))}\r\n// //           </ul>\r\n// //         </>\r\n// //       )}\r\n\r\n// //       {/* Toggle button to switch between volume and dollar amount */}\r\n// //       <button onClick={handleToggleVolume}>\r\n// //         {toggleVolume ? 'Show Volume' : 'Show $ Amount'}\r\n// //       </button>\r\n// //     </div>\r\n// //   );\r\n// // };\r\n\r\n// // export default StockTracker;\r\n\r\n\r\n// // import React, { useState, useEffect } from 'react';\r\n// // import axios from 'axios';\r\n// // import { Line, Bar } from 'react-chartjs-2';\r\n// // import 'chart.js/auto'; // Required for chart.js\r\n\r\n// // const StockTracker = () => {\r\n// //   const [symbol, setSymbol] = useState('');\r\n// //   const [priceData, setPriceData] = useState([]);\r\n// //   const [optionData, setOptionData] = useState([]); // For storing option data\r\n// //   const [toggleVolume, setToggleVolume] = useState(false); // Toggles between volume and $ amount\r\n\r\n// //   const handleSubmit = (e) => {\r\n// //     e.preventDefault();\r\n// //     fetchStockData(symbol);\r\n// //   };\r\n// // //   Right now the marrcket is c\r\n// // //   const fetchStockData = async (symbol) => {\r\n// // //     try {\r\n// // //       const now = new Date();\r\n// // //       const tenMinutesAgo = new Date(now.getTime() - 10 * 60 * 1000); // Fetching last 10 minutes of data\r\n// // //       const fromDate = tenMinutesAgo.toISOString().split('T')[0];\r\n// // //       const toDate = now.toISOString().split('T')[0];\r\n  \r\n// // //       // Fetch stock price data\r\n// // //       const priceResponse = await axios.get(\r\n// // //         `https://api.polygon.io/v2/aggs/ticker/${symbol}/range/1/minute/${fromDate}/${toDate}?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\r\n// // //       );\r\n      \r\n// // //       setPriceData(priceResponse.data.results || []);\r\n// // //     } catch (error) {\r\n// // //       console.error('Error fetching stock data:', error);\r\n// // //     }\r\n// // //   };\r\n  \r\n\r\n// //   const fetchStockData = async (symbol) => {\r\n// //     try {\r\n// //       const now = new Date();\r\n// //       const tenMinutesAgo = new Date(now.getTime() - 10 * 60 * 1000);\r\n// //       const fromDate = tenMinutesAgo.toISOString().split('T')[0];\r\n// //       const toDate = now.toISOString().split('T')[0];\r\n\r\n// //       // Fetch stock price data\r\n// //       const priceResponse = await axios.get(\r\n// //         `https://api.polygon.io/v2/aggs/ticker/${symbol}/range/1/minute/2024-09-20/${toDate}?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\r\n// //       );\r\n      \r\n// //       setPriceData(priceResponse.data.results || []);\r\n\r\n// //       // Fetch option data from your provided API URL\r\n// //       const optionResponse = await axios.get(\r\n// //         `https://api.polygon.io/v2/aggs/ticker/O:${symbol}251219C00650000/range/1/day/2024-09-10/${toDate}?adjusted=true&sort=asc&apiKey=_grbZQMP5kasPyiTvmUtApzQ5dapTGSu`\r\n// //       );\r\n\r\n// //       setOptionData(optionResponse.data.results || []); // Store option data\r\n      \r\n// //     } catch (error) {\r\n// //       console.error('Error fetching stock or option data:', error);\r\n// //     }\r\n// //   };\r\n\r\n// //   useEffect(() => {\r\n// //     if (symbol) {\r\n// //       const interval = setInterval(() => {\r\n// //         fetchStockData(symbol);\r\n// //       }, 1000); // Fetch every second\r\n// //       return () => clearInterval(interval);\r\n// //     }\r\n// //   }, [symbol]);\r\n\r\n// //   // Function to calculate Dollar Amount based on Volume and Contract Price\r\n// //   const calculateDollarAmount = (volume, contractPrice) => volume * 100 * contractPrice;\r\n\r\n// //   // Price chart configuration\r\n// //   const priceChart = {\r\n// //     labels: priceData.map((entry) => new Date(entry.t).toLocaleTimeString()),\r\n// //     datasets: [\r\n// //       {\r\n// //         label: 'Stock Price',\r\n// //         data: priceData.map((entry) => entry.c),\r\n// //         fill: false,\r\n// //         backgroundColor: 'rgba(75,192,192,0.4)',\r\n// //         borderColor: 'rgba(75,192,192,1)',\r\n// //       },\r\n// //     ],\r\n// //   };\r\n\r\n\r\n\r\n// //   // Function to toggle between showing volume or dollar amount in option chart\r\n// //   const handleToggleVolume = () => {\r\n// //     setToggleVolume((prevState) => !prevState);\r\n// //     console.log('Toggle Volume Button Clicked:', toggleVolume);\r\n// //   };\r\n\r\n// //   return (\r\n// //     <div>\r\n// //       <form onSubmit={handleSubmit}>\r\n// //         <input\r\n// //           type=\"text\"\r\n// //           placeholder=\"Enter Stock Symbol\"\r\n// //           value={symbol}\r\n// //           onChange={(e) => setSymbol(e.target.value.toUpperCase())}\r\n// //         />\r\n// //         <button type=\"submit\">Submit</button>\r\n// //       </form>\r\n\r\n// //       {/* Display stock price graph */}\r\n// //       {priceData.length > 0 && (\r\n// //         <>\r\n// //           <h2>{symbol} Stock Price</h2>\r\n// //           <Line data={priceChart} />\r\n// //         </>\r\n// //       )}\r\n\r\n\r\n// //     </div>\r\n// //   );\r\n// // };\r\n\r\n// // export default StockTracker;\r\n\r\n// import React, { useState, useEffect } from 'react';\r\n// import axios from 'axios';\r\n// import { Line, Bar } from 'react-chartjs-2';\r\n// import 'chart.js/auto';\r\n\r\n// const StockOptionsTracker = () => {\r\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\r\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\r\n//   const [stockData, setStockData] = useState([]); // Stock price data\r\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\r\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\r\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\r\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [error, setError] = useState(null);\r\n\r\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\r\n\r\n//   // Fetch stock data and options contracts\r\n//   useEffect(() => {\r\n//     const fetchStockDataAndOptions = async () => {\r\n//       setLoading(true);\r\n//       setError(null);\r\n//       try {\r\n//         // Fetch stock data for latest price\r\n//         const stockResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/prev?adjusted=true&apiKey=${polygonApiKey}`\r\n//         );\r\n//         const currentPrice = stockResponse.data.results[0].c;\r\n//         setStockPrice(currentPrice);\r\n\r\n//         // Fetch stock price data for charting\r\n//         const stockPriceResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\r\n//         );\r\n//         setStockData(stockPriceResponse.data.results || []);\r\n\r\n//         // Fetch options contracts for the soonest expiration\r\n//         const optionsResponse = await axios.get(\r\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\r\n//         );\r\n//         const contracts = optionsResponse.data.results || [];\r\n//         console.log(\"Contracts\",contracts);\r\n        \r\n//         // Filter contracts based on strikes around current stock price (±10)\r\n//         const filteredContracts = contracts.filter(\r\n//           (contract) =>\r\n//             contract.expiration_date === '2024-09-27'\r\n//             // && contract.strike_price >= currentPrice - 5 && \r\n//             // contract.strike_price <= currentPrice + 5\r\n//         );\r\n//         console.log(\"Currunet Price\",currentPrice);\r\n//         console.log(\"Filtered Contracts\",filteredContracts);\r\n//         setOptionContracts(filteredContracts);\r\n\r\n//         // Fetch cumulative volume data for each contract\r\n//         const volumes = [];\r\n//         const timeLabels = [];\r\n//         for (let i = 0; i < filteredContracts.length; i++) {\r\n//           const contract = filteredContracts[i];\r\n//           const volumeResponse = await axios.get(\r\n//             `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\r\n//           );\r\n//           const volumeData = volumeResponse.data.results || [];\r\n//           console.log(\"Volume Data\",volumeData);\r\n\r\n//           // Set time labels once (for X-axis)\r\n//           if (i === 0 && volumeData.length > 0) {\r\n//             timeLabels.push(...volumeData.map(item => new Date(item.t).toLocaleTimeString()));\r\n//           }\r\n\r\n//           // Accumulate the volume for each minute across all contracts\r\n//           volumeData.forEach((item, index) => {\r\n//             volumes[index] = (volumes[index] || 0) + item.v;\r\n//           });\r\n//         }\r\n\r\n//         setCumulativeVolumes(volumes);\r\n//         setTimeLabels(timeLabels);\r\n//       } catch (err) {\r\n//         console.error('Error fetching data:', err);\r\n//         setError('Failed to load data');\r\n//       } finally {\r\n//         setLoading(false);\r\n//       }\r\n//     };\r\n\r\n//     fetchStockDataAndOptions();\r\n\r\n//     const interval = setInterval(() => {\r\n//       fetchStockDataAndOptions();\r\n//     }, 60000); // Update every 60 seconds\r\n\r\n//     return () => clearInterval(interval);\r\n//   }, [stockSymbol]);\r\n\r\n//   // Helper function to get today’s date\r\n//   const getTodayDate = () => {\r\n//     const today = new Date();\r\n//     return today.toISOString().split('T')[0];\r\n//   };\r\n\r\n//   // Line chart data for stock price\r\n//   const stockChartData = {\r\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: 'Stock Price',\r\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\r\n//         borderColor: 'rgba(75,192,192,1)',\r\n//         backgroundColor: 'rgba(75,192,192,0.2)',\r\n//         fill: false,\r\n//         tension: 0.1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   // Bar chart data for cumulative options volume\r\n//   const optionsVolumeChartData = {\r\n//     labels: timeLabels, // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: 'Cumulative Volume',\r\n//         data: cumulativeVolumes, // Y-axis (volume)\r\n//         backgroundColor: 'rgba(75, 192, 192, 0.6)',\r\n//         borderColor: 'rgba(75, 192, 192, 1)',\r\n//         borderWidth: 1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   return (\r\n//     <div style={{ padding: '20px' }}>\r\n//       <h2>Stock and Options Tracker</h2>\r\n\r\n//       <div style={{ marginBottom: '20px' }}>\r\n//         <label>\r\n//           Stock Symbol:\r\n//           <input\r\n//             type=\"text\"\r\n//             value={stockSymbol}\r\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\r\n//             style={{ marginLeft: '10px' }}\r\n//           />\r\n//         </label>\r\n//       </div>\r\n\r\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\r\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\r\n//       </button>\r\n\r\n//       {loading && <p>Loading data...</p>}\r\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n//       <div style={{ marginTop: '30px' }}>\r\n//         <h3>Stock Price Data for {stockSymbol}</h3>\r\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\r\n\r\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Expiration Date 2024-09-27</h3>\r\n//         {cumulativeVolumes.length > 0 ? (\r\n//           <Bar data={optionsVolumeChartData} />\r\n//         ) : (\r\n//           <p>No cumulative volume data available</p>\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default StockOptionsTracker;\r\n\r\n\r\n// import React, { useState, useEffect } from 'react';\r\n// import axios from 'axios';\r\n// import { Line, Bar } from 'react-chartjs-2';\r\n// import 'chart.js/auto';\r\n\r\n// const StockOptionsTracker = () => {\r\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\r\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\r\n//   const [stockData, setStockData] = useState([]); // Stock price data\r\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\r\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\r\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\r\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [error, setError] = useState(null);\r\n\r\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\r\n\r\n//   // Fetch stock data and options contracts\r\n//   useEffect(() => {\r\n//     const fetchStockDataAndOptions = async () => {\r\n//       setLoading(true);\r\n//       setError(null);\r\n//       try {\r\n//         // Fetch stock data for latest price\r\n//         const stockResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`\r\n//         );\r\n//         const currentPrice = stockResponse.data.ticker.lastTrade.p;\r\n//         setStockPrice(currentPrice);\r\n\r\n//         // Fetch stock price data for charting\r\n//         const stockPriceResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\r\n//         );\r\n//         setStockData(stockPriceResponse.data.results || []);\r\n\r\n//         // Fetch options contracts for the soonest expiration\r\n//         const optionsResponse = await axios.get(\r\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\r\n//         );\r\n//         const contracts = optionsResponse.data.results || [];\r\n\r\n//         // Find the soonest expiration date\r\n//         const soonestExpiryDate = contracts\r\n//           .map(contract => contract.expiration_date)\r\n//           .sort()[0];\r\n\r\n//         console.log(\"Soonest Expiry Date\",soonestExpiryDate);\r\n\r\n//         // Filter contracts based on strikes around current stock price (±10)\r\n//         const sortedContracts = contracts.sort((a, b) => parseFloat(a.strike_price) - parseFloat(b.strike_price));\r\n\r\n//     // Find the closest strike price to the current price\r\n//     const closestContractIndex = sortedContracts.findIndex(contract => parseFloat(contract.strike_price) >= currentPrice);\r\n\r\n//     // Select 10 strikes below and 10 strikes above\r\n//     const start = Math.max(0, closestContractIndex - 10);\r\n//     const end = Math.min(sortedContracts.length, closestContractIndex + 10);\r\n//     const filteredContracts = sortedContracts.slice(start, end);\r\n\r\n//     console.log(\"Filtered Contracts (10 above and 10 below):\", filteredContracts); // Log filtered contracts\r\n//     setOptionContracts(filteredContracts);\r\n\r\n//         console.log(\"Currunet Price\",currentPrice);\r\n//         console.log(\"Filtered Contracts\",filteredContracts);\r\n        \r\n\r\n//         // Fetch cumulative volume data for each contract\r\n//         if (filteredContracts.length > 0) {\r\n//             const volumes = [];\r\n//             const timeLabels = [];\r\n//             for (let i = 0; i < filteredContracts.length; i++) {\r\n//               const contract = filteredContracts[i];\r\n//               const volumeResponse = await axios.get(\r\n//                 `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\r\n//               );\r\n//               const volumeData = volumeResponse.data.results || [];\r\n//               console.log(\"Volume Data for contract\", contract.ticker, volumeData); // Log volume data for each contract\r\n      \r\n//               // Set time labels once (for X-axis)\r\n//               if (i === 0 && volumeData.length > 0) {\r\n//                 timeLabels.push(...volumeData.map(item => new Date(item.t).toLocaleTimeString()));\r\n//               }\r\n      \r\n//               // Accumulate the volume for each minute across all contracts\r\n//               volumeData.forEach((item, index) => {\r\n//                 volumes[index] = (volumes[index] || 0) + item.v;\r\n//               });\r\n//             }\r\n      \r\n//             setCumulativeVolumes(volumes);\r\n//             setTimeLabels(timeLabels);\r\n//             }  else {\r\n//                 console.log(\"No contracts found within the 10 above and below strike price range.\");\r\n//               }\r\n\r\n//       } catch (err) {\r\n//         console.error('Error fetching data:', err);\r\n//         setError('Failed to load data');\r\n//       } finally {\r\n//         setLoading(false);\r\n//       }\r\n//     };\r\n\r\n//     fetchStockDataAndOptions();\r\n\r\n//     const interval = setInterval(() => {\r\n//       fetchStockDataAndOptions();\r\n//     }, 60000); // Update every 60 seconds\r\n\r\n//     return () => clearInterval(interval);\r\n//   }, [stockSymbol]);\r\n\r\n//   // Helper function to get today’s date\r\n//   const getTodayDate = () => {\r\n//     const today = new Date();\r\n//     return today.toISOString().split('T')[0];\r\n//   };\r\n\r\n//   // Line chart data for stock price\r\n//   const stockChartData = {\r\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: 'Stock Price',\r\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\r\n//         borderColor: 'rgba(75,192,192,1)',\r\n//         backgroundColor: 'rgba(75,192,192,0.2)',\r\n//         fill: false,\r\n//         tension: 0.1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   // Bar chart data for cumulative options volume\r\n//   const optionsVolumeChartData = {\r\n//     labels: timeLabels, // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: 'Cumulative Volume',\r\n//         data: cumulativeVolumes, // Y-axis (volume)\r\n//         backgroundColor: 'rgba(75, 192, 192, 0.6)',\r\n//         borderColor: 'rgba(75, 192, 192, 1)',\r\n//         borderWidth: 1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   return (\r\n//     <div style={{ padding: '20px' }}>\r\n//       <h2>Stock and Options Tracker</h2>\r\n\r\n//       <div style={{ marginBottom: '20px' }}>\r\n//         <label>\r\n//           Stock Symbol:\r\n//           <input\r\n//             type=\"text\"\r\n//             value={stockSymbol}\r\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\r\n//             style={{ marginLeft: '10px' }}\r\n//           />\r\n//         </label>\r\n//       </div>\r\n\r\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\r\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\r\n//       </button>\r\n\r\n//       {loading && <p>Loading data...</p>}\r\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n//       <div style={{ marginTop: '30px' }}>\r\n//         <h3>Stock Price Data for {stockSymbol}</h3>\r\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\r\n\r\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Nearest Expiry</h3>\r\n//         {cumulativeVolumes.length > 0 ? (\r\n//           <Bar data={optionsVolumeChartData} />\r\n//         ) : (\r\n//           <p>No cumulative volume data available</p>\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default StockOptionsTracker;\r\n\r\n\r\n// import React, { useState, useEffect } from 'react';\r\n// import axios from 'axios';\r\n// import { Line, Bar } from 'react-chartjs-2';\r\n// import 'chart.js/auto';\r\n\r\n// const StockOptionsTracker = () => {\r\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\r\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\r\n//   const [stockData, setStockData] = useState([]); // Stock price data\r\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\r\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\r\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\r\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [error, setError] = useState(null);\r\n\r\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\r\n\r\n//   // Fetch stock data and options contracts\r\n//   useEffect(() => {\r\n//     const fetchStockDataAndOptions = async () => {\r\n//       setLoading(true);\r\n//       setError(null);\r\n//       try {\r\n//         // Fetch stock data for latest price\r\n//         const stockResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`\r\n//         );\r\n//         const currentPrice = stockResponse.data.ticker.lastTrade.p;\r\n//         setStockPrice(currentPrice);\r\n\r\n//         // Fetch stock price data for charting\r\n//         const stockPriceResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\r\n//         );\r\n//         setStockData(stockPriceResponse.data.results || []);\r\n\r\n//         // Fetch options contracts for the soonest expiration\r\n//         const optionsResponse = await axios.get(\r\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\r\n//         );\r\n//         const contracts = optionsResponse.data.results || [];\r\n\r\n//         // Find the soonest expiration date\r\n//         const soonestExpiryDate = contracts\r\n//           .map(contract => contract.expiration_date)\r\n//           .sort()[0];\r\n\r\n//         console.log(\"Soonest Expiry Date\", soonestExpiryDate);\r\n\r\n//         // Filter contracts based on strikes around current stock price (±10)\r\n//         const sortedContracts = contracts.sort((a, b) => parseFloat(a.strike_price) - parseFloat(b.strike_price));\r\n\r\n//         // Find the closest strike price to the current price\r\n//         const closestContractIndex = sortedContracts.findIndex(contract => parseFloat(contract.strike_price) >= currentPrice);\r\n\r\n//         // Select 10 strikes below and 10 strikes above\r\n//         const start = Math.max(0, closestContractIndex - 10);\r\n//         const end = Math.min(sortedContracts.length, closestContractIndex + 10);\r\n//         const filteredContracts = sortedContracts.slice(start, end);\r\n\r\n//         console.log(\"Filtered Contracts (10 above and 10 below):\", filteredContracts); // Log filtered contracts\r\n//         setOptionContracts(filteredContracts);\r\n\r\n//         console.log(\"Current Price\", currentPrice);\r\n//         console.log(\"Filtered Contracts\", filteredContracts);\r\n\r\n//         // Fetch cumulative volume data for each contract\r\n//         if (filteredContracts.length > 0) {\r\n//           const volumes = [];\r\n//           const timeLabels = [];\r\n//           for (let i = 0; i < filteredContracts.length; i++) {\r\n//             const contract = filteredContracts[i];\r\n//             const volumeResponse = await axios.get(\r\n//               `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\r\n//             );\r\n//             const volumeData = volumeResponse.data.results || [];\r\n//             console.log(\"Volume Data for contract\", contract.ticker, volumeData); // Log volume data for each contract\r\n\r\n//             // Set time labels once (for X-axis)\r\n//             if (i === 0 && volumeData.length > 0) {\r\n//               timeLabels.push(...volumeData.map(item => new Date(item.t).toLocaleTimeString()));\r\n//             }\r\n\r\n//             // Accumulate the volume for each minute across all contracts\r\n//             volumeData.forEach((item, index) => {\r\n//               volumes[index] = (volumes[index] || 0) + item.v;\r\n//             });\r\n//           }\r\n\r\n//           setCumulativeVolumes(volumes);\r\n//           setTimeLabels(timeLabels);\r\n//         } else {\r\n//           console.log(\"No contracts found within the 10 above and below strike price range.\");\r\n//         }\r\n\r\n//       } catch (err) {\r\n//         console.error('Error fetching data:', err);\r\n//         setError('Failed to load data');\r\n//       } finally {\r\n//         setLoading(false);\r\n//       }\r\n//     };\r\n\r\n//     fetchStockDataAndOptions();\r\n\r\n//     const interval = setInterval(() => {\r\n//       fetchStockDataAndOptions();\r\n//     }, 60000); // Update every 60 seconds\r\n\r\n//     return () => clearInterval(interval);\r\n//   }, [stockSymbol]);\r\n\r\n//   // Helper function to get today’s date\r\n//   const getTodayDate = () => {\r\n//     const today = new Date();\r\n//     return today.toISOString().split('T')[0];\r\n//   };\r\n\r\n//   // Line chart data for stock price\r\n//   const stockChartData = {\r\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: 'Stock Price',\r\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\r\n//         borderColor: 'rgba(75,192,192,1)',\r\n//         backgroundColor: 'rgba(75,192,192,0.2)',\r\n//         fill: false,\r\n//         tension: 0.1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   // Bar chart data for cumulative options volume\r\n//   const optionsVolumeChartData = {\r\n//     labels: timeLabels, // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: 'Cumulative Volume',\r\n//         data: cumulativeVolumes, // Y-axis (volume)\r\n//         backgroundColor: 'rgba(75, 192, 192, 0.6)',\r\n//         borderColor: 'rgba(75, 192, 192, 1)',\r\n//         borderWidth: 1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   return (\r\n//     <div style={{ padding: '20px' }}>\r\n//       <h2>Stock and Options Tracker</h2>\r\n\r\n//       <div style={{ marginBottom: '20px' }}>\r\n//         <label>\r\n//           Stock Symbol:\r\n//           <input\r\n//             type=\"text\"\r\n//             value={stockSymbol}\r\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\r\n//             style={{ marginLeft: '10px' }}\r\n//           />\r\n//         </label>\r\n//       </div>\r\n\r\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\r\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\r\n//       </button>\r\n\r\n//       {loading && <p>Loading data...</p>}\r\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n//       <div style={{ marginTop: '30px' }}>\r\n//         <h3>Stock Price Data for {stockSymbol}</h3>\r\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\r\n\r\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Nearest Expiry</h3>\r\n//         {cumulativeVolumes.length > 0 ? (\r\n//           <Bar data={optionsVolumeChartData} />\r\n//         ) : (\r\n//           <p>No cumulative volume data available</p>\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default StockOptionsTracker;\r\n\r\n\r\n// import React, { useState, useEffect } from 'react';\r\n// import axios from 'axios';\r\n// import { Line, Bar } from 'react-chartjs-2';\r\n// import 'chart.js/auto';\r\n\r\n// // Black-Scholes Greeks calculations\r\n// const blackScholesGreeks = (S, K, T, r, sigma, optionType) => {\r\n//     const d1 = (Math.log(S / K) + (r + (sigma ** 2) / 2) * T) / (sigma * Math.sqrt(T));\r\n//     const d2 = d1 - sigma * Math.sqrt(T);\r\n//     const phi = (x) => (1 / Math.sqrt(2 * Math.PI)) * Math.exp(-0.5 * x ** 2);\r\n  \r\n//     const delta = optionType === 'call' ? phi(d1) : phi(d1) - 1;\r\n//     return { delta };\r\n//   };\r\n\r\n// const StockOptionsTracker = () => {\r\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\r\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\r\n//   const [stockData, setStockData] = useState([]); // Stock price data\r\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\r\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\r\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\r\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [error, setError] = useState(null);\r\n\r\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\r\n\r\n//   // Fetch stock data and options contracts\r\n//   useEffect(() => {\r\n//     const fetchStockDataAndOptions = async () => {\r\n//       setLoading(true);\r\n//       setError(null);\r\n//       try {\r\n//         // Fetch stock data for latest price\r\n//         const stockResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`\r\n//         );\r\n//         const currentPrice = stockResponse.data.ticker.lastTrade.p;\r\n//         setStockPrice(currentPrice);\r\n\r\n//         // Fetch stock price data for charting\r\n//         const stockPriceResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\r\n//         );\r\n//         setStockData(stockPriceResponse.data.results || []);\r\n\r\n//         // Fetch options contracts for the soonest expiration\r\n//         const optionsResponse = await axios.get(\r\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\r\n//         );\r\n//         const contracts = optionsResponse.data.results || [];\r\n\r\n//         // Find the soonest expiration date\r\n//         const soonestExpiryDate = contracts\r\n//           .map(contract => contract.expiration_date)\r\n//           .sort()[0];\r\n\r\n//         console.log(\"Soonest Expiry Date\", soonestExpiryDate);\r\n\r\n//         // Filter contracts based on strikes around current stock price (±10)\r\n//         const sortedContracts = contracts.sort((a, b) => parseFloat(a.strike_price) - parseFloat(b.strike_price));\r\n\r\n//         // Find the closest strike price to the current price\r\n//         const closestContractIndex = sortedContracts.findIndex(contract => parseFloat(contract.strike_price) >= currentPrice);\r\n\r\n//         // Select 10 strikes below and 10 strikes above\r\n//         const start = Math.max(0, closestContractIndex - 10);\r\n//         const end = Math.min(sortedContracts.length, closestContractIndex + 10);\r\n//         const filteredContracts = sortedContracts.slice(start, end);\r\n\r\n//         console.log(\"Filtered Contracts (10 above and 10 below):\", filteredContracts); // Log filtered contracts\r\n//         setOptionContracts(filteredContracts);\r\n\r\n//         console.log(\"Current Price\", currentPrice);\r\n//         console.log(\"Filtered Contracts\", filteredContracts);\r\n\r\n//         // Fetch cumulative volume data for each contract\r\n//         if (filteredContracts.length > 0) {\r\n//           const volumes = [];\r\n//           const timeLabels = [];\r\n//           for (let i = 0; i < filteredContracts.length; i++) {\r\n//             const contract = filteredContracts[i];\r\n//             const volumeResponse = await axios.get(\r\n//               `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\r\n//             );\r\n//             const volumeData = volumeResponse.data.results || [];\r\n//             console.log(\"Volume Data for contract\", contract.ticker, volumeData); // Log volume data for each contract\r\n\r\n//             // Set time labels once (for X-axis)\r\n//             if (i === 0 && volumeData.length > 0) {\r\n//               timeLabels.push(...volumeData.map(item => new Date(item.t).toLocaleTimeString()));\r\n//             }\r\n\r\n//             // Accumulate the volume for each minute across all contracts\r\n//             volumeData.forEach((item, index) => {\r\n//               volumes[index] = (volumes[index] || 0) + item.v;\r\n//             });\r\n//           }\r\n\r\n//           setCumulativeVolumes(volumes);\r\n//           setTimeLabels(timeLabels);\r\n//         } else {\r\n//           console.log(\"No contracts found within the 10 above and below strike price range.\");\r\n//         }\r\n\r\n//       } catch (err) {\r\n//         console.error('Error fetching data:', err);\r\n//         setError('Failed to load data');\r\n//       } finally {\r\n//         setLoading(false);\r\n//       }\r\n//     };\r\n\r\n//     fetchStockDataAndOptions();\r\n\r\n//     const interval = setInterval(() => {\r\n//       fetchStockDataAndOptions();\r\n//     }, 60000); // Update every 60 seconds\r\n\r\n//     return () => clearInterval(interval);\r\n//   }, [stockSymbol]);\r\n\r\n//   // Helper function to get today’s date\r\n//   const getTodayDate = () => {\r\n//     const today = new Date();\r\n//     return today.toISOString().split('T')[0];\r\n//   };\r\n\r\n//   // Line chart data for stock price\r\n//   const stockChartData = {\r\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: 'Stock Price',\r\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\r\n//         borderColor: 'rgba(75,192,192,1)',\r\n//         backgroundColor: 'rgba(75,192,192,0.2)',\r\n//         fill: false,\r\n//         tension: 0.1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   // Bar chart data for cumulative options volume\r\n//   const optionsVolumeChartData = {\r\n//     labels: timeLabels, // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: 'Cumulative Volume',\r\n//         data: cumulativeVolumes, // Y-axis (volume)\r\n//         backgroundColor: 'rgba(75, 192, 192, 0.6)',\r\n//         borderColor: 'rgba(75, 192, 192, 1)',\r\n//         borderWidth: 1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   return (\r\n//     <div style={{ padding: '20px' }}>\r\n//       <h2>Stock and Options Tracker</h2>\r\n\r\n//       <div style={{ marginBottom: '20px' }}>\r\n//         <label>\r\n//           Stock Symbol:\r\n//           <input\r\n//             type=\"text\"\r\n//             value={stockSymbol}\r\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\r\n//             style={{ marginLeft: '10px' }}\r\n//           />\r\n//         </label>\r\n//       </div>\r\n\r\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\r\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\r\n//       </button>\r\n\r\n//       {loading && <p>Loading data...</p>}\r\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n//       <div style={{ marginTop: '30px' }}>\r\n//         <h3>Stock Price Data for {stockSymbol}</h3>\r\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\r\n\r\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Nearest Expiry</h3>\r\n//         {cumulativeVolumes.length > 0 ? (\r\n//           <Bar data={optionsVolumeChartData} />\r\n//         ) : (\r\n//           <p>No cumulative volume data available</p>\r\n//         )}\r\n\r\n        \r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default StockOptionsTracker;\r\n\r\n\r\n// import React, { useState, useEffect } from 'react';\r\n// import axios from 'axios';\r\n// import { Line, Bar } from 'react-chartjs-2';\r\n// import 'chart.js/auto';\r\n\r\n// // Black-Scholes Greeks calculations\r\n// const blackScholesGreeks = (S, K, T, r, sigma, optionType) => {\r\n//   const d1 = (Math.log(S / K) + (r + (sigma ** 2) / 2) * T) / (sigma * Math.sqrt(T));\r\n//   const d2 = d1 - sigma * Math.sqrt(T);\r\n//   const phi = (x) => (1 / Math.sqrt(2 * Math.PI)) * Math.exp(-0.5 * x ** 2);\r\n\r\n//   const delta = optionType === 'call' ? phi(d1) : phi(d1) - 1;\r\n//   return { delta };\r\n// };\r\n\r\n// const StockOptionsTracker = () => {\r\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\r\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\r\n//   const [stockData, setStockData] = useState([]); // Stock price data\r\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\r\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\r\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\r\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [error, setError] = useState(null);\r\n\r\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\r\n\r\n//   // Fetch stock data and options contracts\r\n//   useEffect(() => {\r\n//     const fetchStockDataAndOptions = async () => {\r\n//       setLoading(true);\r\n//       setError(null);\r\n//       try {\r\n//         // Fetch stock data for latest price\r\n//         const stockResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`\r\n//         );\r\n//         const currentPrice = stockResponse.data.ticker.lastTrade.p;\r\n//         setStockPrice(currentPrice);\r\n\r\n//         // Fetch stock price data for charting\r\n//         const stockPriceResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\r\n//         );\r\n//         setStockData(stockPriceResponse.data.results || []);\r\n\r\n//         // Fetch options contracts for the soonest expiration\r\n//         const optionsResponse = await axios.get(\r\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\r\n//         );\r\n//         const contracts = optionsResponse.data.results || [];\r\n\r\n//         // Find the soonest expiration date\r\n//         const soonestExpiryDate = contracts\r\n//           .map(contract => contract.expiration_date)\r\n//           .sort()[0];\r\n\r\n//         console.log(\"Soonest Expiry Date\", soonestExpiryDate);\r\n\r\n//         // Filter contracts based on strikes around current stock price (±10)\r\n//         const sortedContracts = contracts.sort((a, b) => parseFloat(a.strike_price) - parseFloat(b.strike_price));\r\n\r\n//         // Find the closest strike price to the current price\r\n//         const closestContractIndex = sortedContracts.findIndex(contract => parseFloat(contract.strike_price) >= currentPrice);\r\n\r\n//         // Select 10 strikes below and 10 strikes above\r\n//         const start = Math.max(0, closestContractIndex - 10);\r\n//         const end = Math.min(sortedContracts.length, closestContractIndex + 10);\r\n//         const filteredContracts = sortedContracts.slice(start, end);\r\n\r\n//         console.log(\"Filtered Contracts (10 above and 10 below):\", filteredContracts); // Log filtered contracts\r\n//         setOptionContracts(filteredContracts);\r\n\r\n//         console.log(\"Current Price\", currentPrice);\r\n//         console.log(\"Filtered Contracts\", filteredContracts);\r\n\r\n//         // Fetch cumulative volume data for each contract\r\n//         if (filteredContracts.length > 0) {\r\n//           const volumes = [];\r\n//           const timeLabels = [];\r\n//           for (let i = 0; i < filteredContracts.length; i++) {\r\n//             const contract = filteredContracts[i];\r\n//             const volumeResponse = await axios.get(\r\n//               `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\r\n//             );\r\n//             const volumeData = volumeResponse.data.results || [];\r\n//             console.log(\"Volume Data for contract\", contract.ticker, volumeData); // Log volume data for each contract\r\n\r\n//             // Set time labels once (for X-axis)\r\n//             if (i === 0 && volumeData.length > 0) {\r\n//               timeLabels.push(...volumeData.map(item => new Date(item.t).toLocaleTimeString()));\r\n//             }\r\n\r\n//             // Accumulate the volume for each minute across all contracts\r\n//             volumeData.forEach((item, index) => {\r\n//               volumes[index] = (volumes[index] || 0) + item.v;\r\n//             });\r\n//           }\r\n\r\n//           setCumulativeVolumes(volumes);\r\n//           setTimeLabels(timeLabels);\r\n//         } else {\r\n//           console.log(\"No contracts found within the 10 above and below strike price range.\");\r\n//         }\r\n\r\n//       } catch (err) {\r\n//         console.error('Error fetching data:', err);\r\n//         setError('Failed to load data');\r\n//       } finally {\r\n//         setLoading(false);\r\n//       }\r\n//     };\r\n\r\n//     fetchStockDataAndOptions();\r\n\r\n//     const interval = setInterval(() => {\r\n//       fetchStockDataAndOptions();\r\n//     }, 60000); // Update every 60 seconds\r\n\r\n//     return () => clearInterval(interval);\r\n//   }, [stockSymbol]);\r\n\r\n//   // Helper function to get today’s date\r\n//   const getTodayDate = () => {\r\n//     const today = new Date();\r\n//     return today.toISOString().split('T')[0];\r\n//   };\r\n\r\n//   // Line chart data for stock price\r\n//   const stockChartData = {\r\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: 'Stock Price',\r\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\r\n//         borderColor: 'rgba(75,192,192,1)',\r\n//         backgroundColor: 'rgba(75,192,192,0.2)',\r\n//         fill: false,\r\n//         tension: 0.1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   // Bar chart data for cumulative options volume\r\n//   const optionsVolumeChartData = {\r\n//     labels: timeLabels, // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: isDollarMode ? 'Cumulative Dollar Amount' : 'Cumulative Volume',\r\n//         data: cumulativeVolumes.map((volume, index) =>\r\n//           isDollarMode ? volume * 100 * stockPrice : volume\r\n//         ), // Convert to dollar amount if isDollarMode is true\r\n//         backgroundColor: 'rgba(75, 192, 192, 0.6)',\r\n//         borderColor: 'rgba(75, 192, 192, 1)',\r\n//         borderWidth: 1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   return (\r\n//     <div style={{ padding: '20px' }}>\r\n//       <h2>Stock and Options Tracker</h2>\r\n\r\n//       <div style={{ marginBottom: '20px' }}>\r\n//         <label>\r\n//           Stock Symbol:\r\n//           <input\r\n//             type=\"text\"\r\n//             value={stockSymbol}\r\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\r\n//             style={{ marginLeft: '10px' }}\r\n//           />\r\n//         </label>\r\n//       </div>\r\n\r\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\r\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\r\n//       </button>\r\n\r\n//       {loading && <p>Loading data...</p>}\r\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n//       <div style={{ marginTop: '30px' }}>\r\n//         <h3>Stock Price Data for {stockSymbol}</h3>\r\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\r\n\r\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Nearest Expiry</h3>\r\n//         {cumulativeVolumes.length > 0 ? (\r\n//           <Bar data={optionsVolumeChartData} />\r\n//         ) : (\r\n//           <p>No cumulative volume data available</p>\r\n//         )}\r\n\r\n//         <h3 style={{ marginTop: '40px' }}>Option Chain with 1% Move Estimation</h3>\r\n//         {optionContracts.length > 0 ? (\r\n//           <table>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th>Strike</th>\r\n//                 <th>Call LTP</th>\r\n//                 <th>Put LTP</th>\r\n//                 <th>IV</th>\r\n//                 <th>1% Up Estimation</th>\r\n//                 <th>1% Down Estimation</th>\r\n//               </tr>\r\n//             </thead>\r\n//             <tbody>\r\n//               {optionContracts.map((contract, index) => {\r\n//                 const T = (new Date(contract.expiration_date).getTime() - new Date().getTime()) / (365 * 24 * 60 * 60 * 1000); // Time to expiration in years\r\n//                 const greeks = blackScholesGreeks(\r\n//                   stockPrice,\r\n//                   parseFloat(contract.strike_price),\r\n//                   T,\r\n//                   0.05, // Assuming 5% risk-free rate\r\n//                   parseFloat(contract.implied_volatility) / 100,\r\n//                   'call'\r\n//                 );\r\n//                 const delta = greeks.delta;\r\n//                 const moveUp = stockPrice * 1.01;\r\n//                 const moveDown = stockPrice * 0.99;\r\n\r\n//                 return (\r\n//                   <tr key={index}>\r\n//                     <td>{contract.strike_price}</td>\r\n//                     <td>{contract.call_last_traded_price}</td>\r\n//                     <td>{contract.put_last_traded_price}</td>\r\n//                     <td>{contract.implied_volatility}%</td>\r\n//                     <td>{moveUp.toFixed(2)}</td>\r\n//                     <td>{moveDown.toFixed(2)}</td>\r\n//                   </tr>\r\n//                 );\r\n//               })}\r\n//             </tbody>\r\n//           </table>\r\n//         ) : (\r\n//           <p>No option contracts available</p>\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default StockOptionsTracker;\r\n\r\n\r\n// import React, { useState, useEffect } from 'react';\r\n// import axios from 'axios';\r\n// import { Line, Bar } from 'react-chartjs-2';\r\n// import 'chart.js/auto';\r\n\r\n// // Black-Scholes Greeks calculations\r\n// const blackScholesGreeks = (S, K, T, r, sigma, optionType) => {\r\n//     const d1 = (Math.log(S / K) + (r + (sigma ** 2) / 2) * T) / (sigma * Math.sqrt(T));\r\n//     const d2 = d1 - sigma * Math.sqrt(T);\r\n//     const phi = (x) => (1 / Math.sqrt(2 * Math.PI)) * Math.exp(-0.5 * x ** 2);\r\n  \r\n//     // Greeks calculations\r\n//     const delta = optionType === 'call' ? phi(d1) : phi(d1) - 1;\r\n//     const vega = S * Math.sqrt(T) * phi(d1); // Vega represents the sensitivity to volatility\r\n//     const gamma = phi(d1) / (S * sigma * Math.sqrt(T)); // Gamma for sensitivity to delta changes\r\n  \r\n//     return { delta, gamma, vega };\r\n//   };\r\n  \r\n\r\n// const StockOptionsTracker = () => {\r\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\r\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\r\n//   const [stockData, setStockData] = useState([]); // Stock price data\r\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\r\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\r\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\r\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [error, setError] = useState(null);\r\n\r\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\r\n\r\n//   // Fetch stock data and options contracts\r\n//   useEffect(() => {\r\n//     const fetchStockDataAndOptions = async () => {\r\n//       setLoading(true);\r\n//       setError(null);\r\n//       try {\r\n//         // Fetch stock data for latest price\r\n//         const stockResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`\r\n//         );\r\n//         const currentPrice = stockResponse.data.ticker.lastTrade.p;\r\n//         setStockPrice(currentPrice);\r\n\r\n//         // Fetch stock price data for charting\r\n//         const stockPriceResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-20/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\r\n//         );\r\n//         setStockData(stockPriceResponse.data.results || []);\r\n\r\n//         // Fetch options contracts for the soonest expiration\r\n//         const optionsResponse = await axios.get(\r\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\r\n//         );\r\n//         const contracts = optionsResponse.data.results || [];\r\n\r\n//         // Find the soonest expiration date\r\n//         const soonestExpiryDate = contracts\r\n//           .map(contract => contract.expiration_date)\r\n//           .sort()[0];\r\n\r\n//         // Filter contracts based on strikes around current stock price (±10)\r\n//         const sortedContracts = contracts.sort((a, b) => parseFloat(a.strike_price) - parseFloat(b.strike_price));\r\n\r\n//         // Find the closest strike price to the current price\r\n//         const closestContractIndex = sortedContracts.findIndex(contract => parseFloat(contract.strike_price) >= currentPrice);\r\n\r\n//         // Select 10 strikes below and 10 strikes above\r\n//         const start = Math.max(0, closestContractIndex - 10);\r\n//         const end = Math.min(sortedContracts.length, closestContractIndex + 10);\r\n//         const filteredContracts = sortedContracts.slice(start, end);\r\n\r\n//         setOptionContracts(filteredContracts);\r\n\r\n//         // Fetch cumulative volume data for each contract\r\n//         if (filteredContracts.length > 0) {\r\n//             const volumes = [];\r\n//             let timeLabels = [];\r\n          \r\n//             try {\r\n//               // Create an array of promises to fetch the volume data for all contracts concurrently\r\n//               const volumePromises = filteredContracts.map(async (contract, index) => {\r\n//                 const volumeResponse = await axios.get(\r\n//                   `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\r\n//                 );\r\n          \r\n//                 const volumeData = volumeResponse.data.results || [];\r\n          \r\n//                 // Set time labels only for the first contract's volume data\r\n//                 if (index === 0 && volumeData.length > 0) {\r\n//                   timeLabels = volumeData.map(item => new Date(item.t).toLocaleTimeString());\r\n//                 }\r\n          \r\n//                 // Return the volume data for further processing\r\n//                 return volumeData;\r\n//               });\r\n          \r\n//               // Wait for all the promises to resolve concurrently\r\n//               const resolvedVolumes = await Promise.all(volumePromises);\r\n          \r\n//               // Process the resolved volume data and accumulate volumes per minute\r\n//               resolvedVolumes.forEach(volumeData => {\r\n//                 volumeData.forEach((item, index) => {\r\n//                   volumes[index] = (volumes[index] || 0) + item.v;\r\n//                 });\r\n//               });\r\n          \r\n//               // Update the state with accumulated volumes and time labels\r\n//               setCumulativeVolumes(volumes);\r\n//               setTimeLabels(timeLabels);\r\n          \r\n//             } catch (error) {\r\n//               console.error('Error fetching cumulative volume data:', error);\r\n//             }\r\n//           }\r\n          \r\n//       } catch (err) {\r\n//         console.error('Error fetching data:', err);\r\n//         setError('Failed to load data');\r\n//       } finally {\r\n//         setLoading(false);\r\n//       }\r\n//     };\r\n\r\n//     fetchStockDataAndOptions();\r\n\r\n//     const interval = setInterval(() => {\r\n//       fetchStockDataAndOptions();\r\n//     }, 60000); // Update every 60 seconds\r\n\r\n//     return () => clearInterval(interval);\r\n//   }, [stockSymbol]);\r\n\r\n//   // Helper function to get today’s date\r\n//   const getTodayDate = () => {\r\n//     const today = new Date();\r\n//     return today.toISOString().split('T')[0];\r\n//   };\r\n\r\n//   // Line chart data for stock price\r\n//   const stockChartData = {\r\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: 'Stock Price',\r\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\r\n//         borderColor: 'rgba(75,192,192,1)',\r\n//         backgroundColor: 'rgba(75,192,192,0.2)',\r\n//         fill: false,\r\n//         tension: 0.1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   // Bar chart data for cumulative options volume\r\n//   const optionsVolumeChartData = {\r\n//     labels: timeLabels, // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: isDollarMode ? 'Cumulative Dollar Amount' : 'Cumulative Volume',\r\n//         data: cumulativeVolumes.map((volume, index) =>\r\n//           isDollarMode ? volume * 100 * stockPrice : volume\r\n//         ), // Convert to dollar amount if isDollarMode is true\r\n//         backgroundColor: 'rgba(75, 192, 192, 0.6)',\r\n//         borderColor: 'rgba(75, 192, 192, 1)',\r\n//         borderWidth: 1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   return (\r\n//     <div style={{ padding: '20px' }}>\r\n//       <h2>Stock and Options Tracker</h2>\r\n\r\n//       <div style={{ marginBottom: '20px' }}>\r\n//         <label>\r\n//           Stock Symbol:\r\n//           <input\r\n//             type=\"text\"\r\n//             value={stockSymbol}\r\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\r\n//             style={{ marginLeft: '10px' }}\r\n//           />\r\n//         </label>\r\n//       </div>\r\n\r\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\r\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\r\n//       </button>\r\n\r\n//       {loading && <p>Loading data...</p>}\r\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n//       <div style={{ marginTop: '30px' }}>\r\n//         <h3>Stock Price Data for {stockSymbol}</h3>\r\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\r\n\r\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Nearest Expiry</h3>\r\n//         {cumulativeVolumes.length > 0 ? (\r\n//           <Bar data={optionsVolumeChartData} />\r\n//         ) : (\r\n//           <p>No cumulative volume data available</p>\r\n//         )}\r\n\r\n//         <h3 style={{ marginTop: '40px' }}>Option Chain with 1% Move Estimation</h3>\r\n//         {optionContracts.length > 0 ? (\r\n//           <table>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th>Strike</th>\r\n//                 <th>IV</th>\r\n//                 <th>1% Up Estimation</th>\r\n//                 <th>1% Down Estimation</th>\r\n//               </tr>\r\n//             </thead>\r\n//             <tbody>\r\n//               {optionContracts.map((contract, index) => {\r\n//                 const T = (new Date(contract.expiration_date).getTime() - new Date().getTime()) / (365 * 24 * 60 * 60 * 1000); // Time to expiration in years\r\n//                 const greeks = blackScholesGreeks(\r\n//                   stockPrice,\r\n//                   parseFloat(contract.strike_price),\r\n//                   T,\r\n//                   0.05, // Assuming 5% risk-free rate\r\n//                   contract.iv / 100,\r\n//                   contract.option_type\r\n//                 );\r\n\r\n//                 return (\r\n//                   <tr key={index}>\r\n//                     <td>{contract.strike_price}</td>\r\n//                     <td>{contract.iv}</td>\r\n//                     <td>{(greeks.delta * 1.01).toFixed(2)}</td>\r\n//                     <td>{(greeks.delta * 0.99).toFixed(2)}</td>\r\n//                   </tr>\r\n//                 );\r\n//               })}\r\n//             </tbody>\r\n//           </table>\r\n//         ) : (\r\n//           <p>No options contracts data available</p>\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default StockOptionsTracker;\r\n\r\n// import React, { useState, useEffect } from 'react';\r\n// import axios from 'axios';\r\n// import { Line, Bar } from 'react-chartjs-2';\r\n// import 'chart.js/auto';\r\n\r\n// const StockOptionsTracker = () => {\r\n//   const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\r\n//   const [stockPrice, setStockPrice] = useState(0); // Latest stock price\r\n//   const [stockData, setStockData] = useState([]); // Stock price data\r\n//   const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\r\n//   const [cumulativeVolumes, setCumulativeVolumes] = useState([]); // Cumulative volume data\r\n//   const [putsVolumes, setPutsVolumes] = useState([]); // Cumulative puts volume data\r\n//   const [callsVolumes, setCallsVolumes] = useState([]); // Cumulative calls volume data\r\n//   const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\r\n//   const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [error, setError] = useState(null);\r\n\r\n//   const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\r\n\r\n//   // Fetch stock data and options contracts\r\n//   useEffect(() => {\r\n//     const fetchStockDataAndOptions = async () => {\r\n//       setLoading(true);\r\n//       setError(null);\r\n//       try {\r\n//         // Fetch stock data for latest price\r\n//         const stockResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`\r\n//         );\r\n//         const currentPrice = stockResponse.data.ticker.lastTrade.p;\r\n//         setStockPrice(currentPrice);\r\n\r\n//         // Fetch stock price data for charting\r\n//         const stockPriceResponse = await axios.get(\r\n//           `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-20/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\r\n//         );\r\n//         setStockData(stockPriceResponse.data.results || []);\r\n\r\n//         // Fetch options contracts for the soonest expiration\r\n//         const optionsResponse = await axios.get(\r\n//           `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\r\n//         );\r\n//         const contracts = optionsResponse.data.results || [];\r\n\r\n//         // Find the soonest expiration date\r\n//         const soonestExpiryDate = contracts\r\n//           .map(contract => contract.expiration_date)\r\n//           .sort()[0];\r\n\r\n//         // Filter contracts based on strikes around current stock price (±10)\r\n//         const sortedContracts = contracts.sort((a, b) => parseFloat(a.strike_price) - parseFloat(b.strike_price));\r\n\r\n//         // Find the closest strike price to the current price\r\n//         const closestContractIndex = sortedContracts.findIndex(contract => parseFloat(contract.strike_price) >= currentPrice);\r\n\r\n//         // Select 10 strikes below and 10 strikes above\r\n//         const start = Math.max(0, closestContractIndex - 10);\r\n//         const end = Math.min(sortedContracts.length, closestContractIndex + 10);\r\n//         const filteredContracts = sortedContracts.slice(start, end);\r\n\r\n//         setOptionContracts(filteredContracts);\r\n\r\n//         // Fetch cumulative volume data for each contract\r\n//         if (filteredContracts.length > 0) {\r\n//             const puts = [];\r\n//             const calls = [];\r\n//             const volumes = [];\r\n//             let timeLabels = [];\r\n          \r\n//             try {\r\n//               // Create an array of promises to fetch the volume data for all contracts concurrently\r\n//               const volumePromises = filteredContracts.map(async (contract, index) => {\r\n//                 const volumeResponse = await axios.get(\r\n//                   `https://api.polygon.io/v2/aggs/ticker/${contract.ticker}/range/1/minute/2024-09-10/${getTodayDate()}?adjusted=true&apiKey=${polygonApiKey}`\r\n//                 );\r\n          \r\n//                 const volumeData = volumeResponse.data.results || [];\r\n          \r\n//                 // Set time labels only for the first contract's volume data\r\n//                 if (index === 0 && volumeData.length > 0) {\r\n//                   timeLabels = volumeData.map(item => new Date(item.t).toLocaleTimeString());\r\n//                 }\r\n          \r\n//                 // Store volumes for puts and calls\r\n//                 if (contract.contract_type === 'put') {\r\n//                   volumeData.forEach(item => {\r\n//                     puts.push(item.v);\r\n//                   });\r\n//                 } else if (contract.contract_type === 'call') {\r\n//                   volumeData.forEach(item => {\r\n//                     calls.push(item.v);\r\n//                   });\r\n//                 }\r\n          \r\n//                 // Return the volume data for further processing\r\n//                 return volumeData;\r\n//               });\r\n          \r\n//               // Wait for all the promises to resolve concurrently\r\n//               await Promise.all(volumePromises);\r\n          \r\n//               // Process the resolved volume data and accumulate volumes\r\n//               setPutsVolumes(puts);\r\n//               setCallsVolumes(calls);\r\n//               setCumulativeVolumes(volumes);\r\n//               setTimeLabels(timeLabels);\r\n          \r\n//             } catch (error) {\r\n//               console.error('Error fetching cumulative volume data:', error);\r\n//             }\r\n//           }\r\n          \r\n//       } catch (err) {\r\n//         console.error('Error fetching data:', err);\r\n//         setError('Failed to load data');\r\n//       } finally {\r\n//         setLoading(false);\r\n//       }\r\n//     };\r\n\r\n//     fetchStockDataAndOptions();\r\n\r\n//     const interval = setInterval(() => {\r\n//       fetchStockDataAndOptions();\r\n//     }, 60000); // Update every 60 seconds\r\n\r\n//     return () => clearInterval(interval);\r\n//   }, [stockSymbol]);\r\n\r\n//   // Helper function to get today’s date\r\n//   const getTodayDate = () => {\r\n//     const today = new Date();\r\n//     return today.toISOString().split('T')[0];\r\n//   };\r\n\r\n//   // Line chart data for stock price\r\n//   const stockChartData = {\r\n//     labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: 'Stock Price',\r\n//         data: stockData.map((item) => item.c), // Y-axis (stock price)\r\n//         borderColor: 'rgba(75,192,192,1)',\r\n//         backgroundColor: 'rgba(75,192,192,0.2)',\r\n//         fill: false,\r\n//         tension: 0.1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   // Bar chart data for cumulative options volume\r\n//   const optionsVolumeChartData = {\r\n//     labels: timeLabels, // X-axis (time)\r\n//     datasets: [\r\n//       {\r\n//         label: isDollarMode ? 'Cumulative Dollar Amount' : 'Cumulative Volume (Puts)',\r\n//         data: putsVolumes.map((volume) => (isDollarMode ? volume * 100 * stockPrice : volume)),\r\n//         backgroundColor: 'rgba(255, 99, 132, 0.6)',\r\n//         borderColor: 'rgba(255, 99, 132, 1)',\r\n//         borderWidth: 1,\r\n//       },\r\n//       {\r\n//         label: isDollarMode ? 'Cumulative Dollar Amount' : 'Cumulative Volume (Calls)',\r\n//         data: callsVolumes.map((volume) => (isDollarMode ? volume * 100 * stockPrice : volume)),\r\n//         backgroundColor: 'rgba(54, 162, 235, 0.6)',\r\n//         borderColor: 'rgba(54, 162, 235, 1)',\r\n//         borderWidth: 1,\r\n//       },\r\n//     ],\r\n//   };\r\n\r\n//   return (\r\n//     <div style={{ padding: '20px' }}>\r\n//       <h2>Stock and Options Tracker</h2>\r\n\r\n//       <div style={{ marginBottom: '20px' }}>\r\n//         <label>\r\n//           Stock Symbol:\r\n//           <input\r\n//             type=\"text\"\r\n//             value={stockSymbol}\r\n//             onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\r\n//             style={{ marginLeft: '10px' }}\r\n//           />\r\n//         </label>\r\n//       </div>\r\n\r\n//       <button onClick={() => setIsDollarMode(!isDollarMode)}>\r\n//         {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\r\n//       </button>\r\n\r\n//       {loading && <p>Loading data...</p>}\r\n//       {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n//       <div style={{ marginTop: '30px' }}>\r\n//         <h3>Stock Price Data for {stockSymbol}</h3>\r\n//         {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\r\n\r\n//         <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Nearest Expiry</h3>\r\n//         {putsVolumes.length > 0 || callsVolumes.length > 0 ? (\r\n//           <Bar data={optionsVolumeChartData} />\r\n//         ) : (\r\n//           <p>No cumulative volume data available</p>\r\n//         )}\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default StockOptionsTracker;\r\n\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { Line, Bar } from 'react-chartjs-2';\r\nimport 'chart.js/auto';\r\n\r\nconst StockOptionsTracker = () => {\r\n  const [stockSymbol, setStockSymbol] = useState('AAPL'); // Default stock symbol\r\n  const [stockPrice, setStockPrice] = useState(0); // Latest stock price\r\n  const [stockData, setStockData] = useState([]); // Stock price data\r\n  const [optionContracts, setOptionContracts] = useState([]); // Option contracts data\r\n  const [putsVolumes, setPutsVolumes] = useState([]); // Cumulative puts volume data\r\n  const [callsVolumes, setCallsVolumes] = useState([]); // Cumulative calls volume data\r\n  const [timeLabels, setTimeLabels] = useState([]); // X-axis labels (time)\r\n  const [isDollarMode, setIsDollarMode] = useState(false); // Toggle between volume and dollar amount\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  const polygonApiKey = '_grbZQMP5kasPyiTvmUtApzQ5dapTGSu'; // Replace with your API key\r\n\r\n  // Fetch stock data and options contracts\r\n  useEffect(() => {\r\n    const fetchStockDataAndOptions = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        // Fetch stock data for the latest price\r\n        const stockResponse = await axios.get(\r\n          `https://api.polygon.io/v2/snapshot/locale/us/markets/stocks/tickers/${stockSymbol}?apiKey=${polygonApiKey}`\r\n        );\r\n        const currentPrice = stockResponse.data.ticker.lastTrade.p;\r\n        setStockPrice(currentPrice);\r\n\r\n        // Fetch stock price data for charting\r\n        const stockPriceResponse = await axios.get(\r\n          `https://api.polygon.io/v2/aggs/ticker/${stockSymbol}/range/1/minute/2024-09-20/${getTodayDate()}?adjusted=true&sort=asc&apiKey=${polygonApiKey}`\r\n        );\r\n        setStockData(stockPriceResponse.data.results || []);\r\n\r\n        // Fetch options data dynamically based on stock's current price\r\n        const strikesResponse = await axios.get(\r\n          `https://api.polygon.io/v3/reference/options/contracts?underlying_ticker=${stockSymbol}&apiKey=${polygonApiKey}`\r\n        );\r\n\r\n        const expirationDate = '2024-09-27'; // Example expiration date\r\n        const soonestExpiry = strikesResponse.data.results.reduce((prev, curr) => {\r\n            return new Date(curr.expiration_date) < new Date(prev.expiration_date) ? curr : prev;\r\n        }, strikesResponse.data.results[0]).expiration_date;\r\n\r\n        const strikesForExpiry = strikesResponse.data.results.filter(\r\n          contract => contract.expiration_date === soonestExpiry\r\n        );\r\n        const strikes = strikesForExpiry.map(contract => contract.strike_price);\r\n\r\n        console.log('All Strikes:', strikes); // Log all strikes\r\n        // Find 10 strikes closest to the current price (5 above and 5 below)\r\n        const closestStrikes = strikes\r\n          .filter(strike => Math.abs(strike - currentPrice) <= 50)\r\n          .sort((a, b) => Math.abs(a - currentPrice) - Math.abs(b - currentPrice))\r\n          .slice(0, 10);\r\n\r\n        console.log('Closest Strikes:', closestStrikes); // Log closest strikes\r\n\r\n        // Fetch option volumes for these strikes\r\n        const volumePromises = strikes.flatMap(strike =>\r\n          ['call', 'put'].map(async (contractType) => {\r\n            const response = await axios.get(\r\n              `https://api.polygon.io/v3/snapshot/options/${stockSymbol}?strike_price=${strike}&expiration_date=${expirationDate}&contract_type=${contractType}&order=asc&limit=10&sort=strike_price&apiKey=${polygonApiKey}`\r\n            );\r\n            return response.data.results || [];\r\n          })\r\n        );\r\n\r\n        // Wait for all promises to resolve\r\n        const allVolumes = await Promise.all(volumePromises);\r\n        console.log('All Volumes:', allVolumes); // Log all volumes\r\n\r\n        // Process the data to accumulate volumes\r\n        const puts = [];\r\n        const calls = [];\r\n        let timeLabels = [];\r\n\r\n        allVolumes.forEach((resultList) => {\r\n          resultList.forEach(contract => {\r\n            if (contract.details.contract_type === 'put') {\r\n              puts.push(contract.day.volume);\r\n            } else if (contract.details.contract_type === 'call') {\r\n              calls.push(contract.day.volume);\r\n            }\r\n\r\n            if (timeLabels.length === 0 && contract.day.last_updated) {\r\n              const timestamp = contract.day.last_updated / 1e9; // Convert nanoseconds to seconds\r\n              timeLabels.push(new Date(timestamp * 1000).toLocaleTimeString());\r\n            }\r\n          });\r\n        });\r\n        console.log('Puts:', puts); // Log puts volumes\r\n        console.log('Calls:', calls); // Log calls volumes\r\n\r\n        setPutsVolumes(puts);\r\n        setCallsVolumes(calls);\r\n        setTimeLabels(timeLabels);\r\n\r\n      } catch (err) {\r\n        console.error('Error fetching data:', err);\r\n        setError('Failed to load data');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchStockDataAndOptions();\r\n\r\n    const interval = setInterval(() => {\r\n      fetchStockDataAndOptions();\r\n    }, 60000); // Update every 60 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, [stockSymbol]);\r\n\r\n\r\n  // Helper function to get today’s date\r\n  const getTodayDate = () => {\r\n    const today = new Date();\r\n    return today.toISOString().split('T')[0];\r\n  };\r\n\r\n  // Line chart data for stock price\r\n  const stockChartData = {\r\n    labels: stockData.map((item) => new Date(item.t).toLocaleTimeString()), // X-axis (time)\r\n    datasets: [\r\n      {\r\n        label: 'Stock Price',\r\n        data: stockData.map((item) => item.c), // Y-axis (stock price)\r\n        borderColor: 'rgba(75,192,192,1)',\r\n        backgroundColor: 'rgba(75,192,192,0.2)',\r\n        fill: false,\r\n        tension: 0.1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  // Bar chart data for cumulative options volume\r\n  const optionsVolumeChartData = {\r\n    labels: timeLabels, // X-axis (time)\r\n    datasets: [\r\n      {\r\n        label: isDollarMode ? 'Cumulative Dollar Amount' : 'Cumulative Volume (Puts)',\r\n        data: putsVolumes.map((volume) => (isDollarMode ? volume * 100 * stockPrice : volume)),\r\n        backgroundColor: 'rgba(255, 99, 132, 0.6)',\r\n        borderColor: 'rgba(255, 99, 132, 1)',\r\n        borderWidth: 1,\r\n      },\r\n      {\r\n        label: isDollarMode ? 'Cumulative Dollar Amount' : 'Cumulative Volume (Calls)',\r\n        data: callsVolumes.map((volume) => (isDollarMode ? volume * 100 * stockPrice : volume)),\r\n        backgroundColor: 'rgba(54, 162, 235, 0.6)',\r\n        borderColor: 'rgba(54, 162, 235, 1)',\r\n        borderWidth: 1,\r\n      },\r\n    ],\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      <h2>Stock and Options Tracker</h2>\r\n\r\n      <div style={{ marginBottom: '20px' }}>\r\n        <label>\r\n          Stock Symbol:\r\n          <input\r\n            type=\"text\"\r\n            value={stockSymbol}\r\n            onChange={(e) => setStockSymbol(e.target.value.toUpperCase())}\r\n            style={{ marginLeft: '10px' }}\r\n          />\r\n        </label>\r\n      </div>\r\n\r\n      <button onClick={() => setIsDollarMode(!isDollarMode)}>\r\n        {isDollarMode ? 'Switch to Volume' : 'Switch to Dollar Amount'}\r\n      </button>\r\n\r\n      {loading && <p>Loading data...</p>}\r\n      {error && <p style={{ color: 'red' }}>{error}</p>}\r\n\r\n      <div style={{ marginTop: '30px' }}>\r\n        <h3>Stock Price Data for {stockSymbol}</h3>\r\n        {stockData.length > 0 ? <Line data={stockChartData} /> : <p>No stock data available</p>}\r\n\r\n        <h3 style={{ marginTop: '40px' }}>Options Cumulative Volume for Nearest Expiry</h3>\r\n        {putsVolumes.length > 0 || callsVolumes.length > 0 ? (\r\n          <Bar data={optionsVolumeChartData} />\r\n        ) : (\r\n          <p>No cumulative volume data available</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StockOptionsTracker;\r\n"],"mappings":";;AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,IAAI,EAAEC,GAAG,QAAQ,iBAAiB;AAC3C,OAAO,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEvB,MAAMC,mBAAmB,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAChC,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;EACxD,MAAM,CAACW,UAAU,EAAEC,aAAa,CAAC,GAAGZ,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;EACjD,MAAM,CAACa,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAChD,MAAM,CAACe,eAAe,EAAEC,kBAAkB,CAAC,GAAGhB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAC5D,MAAM,CAACiB,WAAW,EAAEC,cAAc,CAAC,GAAGlB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EACpD,MAAM,CAACmB,YAAY,EAAEC,eAAe,CAAC,GAAGpB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EACtD,MAAM,CAACqB,UAAU,EAAEC,aAAa,CAAC,GAAGtB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAClD,MAAM,CAACuB,YAAY,EAAEC,eAAe,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;EACzD,MAAM,CAACyB,OAAO,EAAEC,UAAU,CAAC,GAAG1B,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAAC2B,KAAK,EAAEC,QAAQ,CAAC,GAAG5B,QAAQ,CAAC,IAAI,CAAC;EAExC,MAAM6B,aAAa,GAAG,kCAAkC,CAAC,CAAC;;EAE1D;EACA5B,SAAS,CAAC,MAAM;IACd,MAAM6B,wBAAwB,GAAG,MAAAA,CAAA,KAAY;MAC3CJ,UAAU,CAAC,IAAI,CAAC;MAChBE,QAAQ,CAAC,IAAI,CAAC;MACd,IAAI;QACF;QACA,MAAMG,aAAa,GAAG,MAAM7B,KAAK,CAAC8B,GAAG,CACnC,uEAAuEvB,WAAW,WAAWoB,aAAa,EAC5G,CAAC;QACD,MAAMI,YAAY,GAAGF,aAAa,CAACG,IAAI,CAACC,MAAM,CAACC,SAAS,CAACC,CAAC;QAC1DzB,aAAa,CAACqB,YAAY,CAAC;;QAE3B;QACA,MAAMK,kBAAkB,GAAG,MAAMpC,KAAK,CAAC8B,GAAG,CACxC,yCAAyCvB,WAAW,8BAA8B8B,YAAY,CAAC,CAAC,kCAAkCV,aAAa,EACjJ,CAAC;QACDf,YAAY,CAACwB,kBAAkB,CAACJ,IAAI,CAACM,OAAO,IAAI,EAAE,CAAC;;QAEnD;QACA,MAAMC,eAAe,GAAG,MAAMvC,KAAK,CAAC8B,GAAG,CACrC,2EAA2EvB,WAAW,WAAWoB,aAAa,EAChH,CAAC;QAED,MAAMa,cAAc,GAAG,YAAY,CAAC,CAAC;QACrC,MAAMC,aAAa,GAAGF,eAAe,CAACP,IAAI,CAACM,OAAO,CAACI,MAAM,CAAC,CAACC,IAAI,EAAEC,IAAI,KAAK;UACtE,OAAO,IAAIC,IAAI,CAACD,IAAI,CAACE,eAAe,CAAC,GAAG,IAAID,IAAI,CAACF,IAAI,CAACG,eAAe,CAAC,GAAGF,IAAI,GAAGD,IAAI;QACxF,CAAC,EAAEJ,eAAe,CAACP,IAAI,CAACM,OAAO,CAAC,CAAC,CAAC,CAAC,CAACQ,eAAe;QAEnD,MAAMC,gBAAgB,GAAGR,eAAe,CAACP,IAAI,CAACM,OAAO,CAACU,MAAM,CAC1DC,QAAQ,IAAIA,QAAQ,CAACH,eAAe,KAAKL,aAC3C,CAAC;QACD,MAAMS,OAAO,GAAGH,gBAAgB,CAACI,GAAG,CAACF,QAAQ,IAAIA,QAAQ,CAACG,YAAY,CAAC;QAEvEC,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEJ,OAAO,CAAC,CAAC,CAAC;QACtC;QACA,MAAMK,cAAc,GAAGL,OAAO,CAC3BF,MAAM,CAACQ,MAAM,IAAIC,IAAI,CAACC,GAAG,CAACF,MAAM,GAAGzB,YAAY,CAAC,IAAI,EAAE,CAAC,CACvD4B,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKJ,IAAI,CAACC,GAAG,CAACE,CAAC,GAAG7B,YAAY,CAAC,GAAG0B,IAAI,CAACC,GAAG,CAACG,CAAC,GAAG9B,YAAY,CAAC,CAAC,CACvE+B,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;QAEfT,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEC,cAAc,CAAC,CAAC,CAAC;;QAEjD;QACA,MAAMQ,cAAc,GAAGb,OAAO,CAACc,OAAO,CAACR,MAAM,IAC3C,CAAC,MAAM,EAAE,KAAK,CAAC,CAACL,GAAG,CAAC,MAAOc,YAAY,IAAK;UAC1C,MAAMC,QAAQ,GAAG,MAAMlE,KAAK,CAAC8B,GAAG,CAC9B,8CAA8CvB,WAAW,iBAAiBiD,MAAM,oBAAoBhB,cAAc,kBAAkByB,YAAY,gDAAgDtC,aAAa,EAC/M,CAAC;UACD,OAAOuC,QAAQ,CAAClC,IAAI,CAACM,OAAO,IAAI,EAAE;QACpC,CAAC,CACH,CAAC;;QAED;QACA,MAAM6B,UAAU,GAAG,MAAMC,OAAO,CAACC,GAAG,CAACN,cAAc,CAAC;QACpDV,OAAO,CAACC,GAAG,CAAC,cAAc,EAAEa,UAAU,CAAC,CAAC,CAAC;;QAEzC;QACA,MAAMG,IAAI,GAAG,EAAE;QACf,MAAMC,KAAK,GAAG,EAAE;QAChB,IAAIpD,UAAU,GAAG,EAAE;QAEnBgD,UAAU,CAACK,OAAO,CAAEC,UAAU,IAAK;UACjCA,UAAU,CAACD,OAAO,CAACvB,QAAQ,IAAI;YAC7B,IAAIA,QAAQ,CAACyB,OAAO,CAACC,aAAa,KAAK,KAAK,EAAE;cAC5CL,IAAI,CAACM,IAAI,CAAC3B,QAAQ,CAAC4B,GAAG,CAACC,MAAM,CAAC;YAChC,CAAC,MAAM,IAAI7B,QAAQ,CAACyB,OAAO,CAACC,aAAa,KAAK,MAAM,EAAE;cACpDJ,KAAK,CAACK,IAAI,CAAC3B,QAAQ,CAAC4B,GAAG,CAACC,MAAM,CAAC;YACjC;YAEA,IAAI3D,UAAU,CAAC4D,MAAM,KAAK,CAAC,IAAI9B,QAAQ,CAAC4B,GAAG,CAACG,YAAY,EAAE;cACxD,MAAMC,SAAS,GAAGhC,QAAQ,CAAC4B,GAAG,CAACG,YAAY,GAAG,GAAG,CAAC,CAAC;cACnD7D,UAAU,CAACyD,IAAI,CAAC,IAAI/B,IAAI,CAACoC,SAAS,GAAG,IAAI,CAAC,CAACC,kBAAkB,CAAC,CAAC,CAAC;YAClE;UACF,CAAC,CAAC;QACJ,CAAC,CAAC;QACF7B,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEgB,IAAI,CAAC,CAAC,CAAC;QAC5BjB,OAAO,CAACC,GAAG,CAAC,QAAQ,EAAEiB,KAAK,CAAC,CAAC,CAAC;;QAE9BvD,cAAc,CAACsD,IAAI,CAAC;QACpBpD,eAAe,CAACqD,KAAK,CAAC;QACtBnD,aAAa,CAACD,UAAU,CAAC;MAE3B,CAAC,CAAC,OAAOgE,GAAG,EAAE;QACZ9B,OAAO,CAAC5B,KAAK,CAAC,sBAAsB,EAAE0D,GAAG,CAAC;QAC1CzD,QAAQ,CAAC,qBAAqB,CAAC;MACjC,CAAC,SAAS;QACRF,UAAU,CAAC,KAAK,CAAC;MACnB;IACF,CAAC;IAEDI,wBAAwB,CAAC,CAAC;IAE1B,MAAMwD,QAAQ,GAAGC,WAAW,CAAC,MAAM;MACjCzD,wBAAwB,CAAC,CAAC;IAC5B,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC;;IAEX,OAAO,MAAM0D,aAAa,CAACF,QAAQ,CAAC;EACtC,CAAC,EAAE,CAAC7E,WAAW,CAAC,CAAC;;EAGjB;EACA,MAAM8B,YAAY,GAAGA,CAAA,KAAM;IACzB,MAAMkD,KAAK,GAAG,IAAI1C,IAAI,CAAC,CAAC;IACxB,OAAO0C,KAAK,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAC1C,CAAC;;EAED;EACA,MAAMC,cAAc,GAAG;IACrBC,MAAM,EAAEhF,SAAS,CAACwC,GAAG,CAAEyC,IAAI,IAAK,IAAI/C,IAAI,CAAC+C,IAAI,CAACC,CAAC,CAAC,CAACX,kBAAkB,CAAC,CAAC,CAAC;IAAE;IACxEY,QAAQ,EAAE,CACR;MACEC,KAAK,EAAE,aAAa;MACpB/D,IAAI,EAAErB,SAAS,CAACwC,GAAG,CAAEyC,IAAI,IAAKA,IAAI,CAACI,CAAC,CAAC;MAAE;MACvCC,WAAW,EAAE,oBAAoB;MACjCC,eAAe,EAAE,sBAAsB;MACvCC,IAAI,EAAE,KAAK;MACXC,OAAO,EAAE;IACX,CAAC;EAEL,CAAC;;EAED;EACA,MAAMC,sBAAsB,GAAG;IAC7BV,MAAM,EAAExE,UAAU;IAAE;IACpB2E,QAAQ,EAAE,CACR;MACEC,KAAK,EAAE1E,YAAY,GAAG,0BAA0B,GAAG,0BAA0B;MAC7EW,IAAI,EAAEjB,WAAW,CAACoC,GAAG,CAAE2B,MAAM,IAAMzD,YAAY,GAAGyD,MAAM,GAAG,GAAG,GAAGrE,UAAU,GAAGqE,MAAO,CAAC;MACtFoB,eAAe,EAAE,yBAAyB;MAC1CD,WAAW,EAAE,uBAAuB;MACpCK,WAAW,EAAE;IACf,CAAC,EACD;MACEP,KAAK,EAAE1E,YAAY,GAAG,0BAA0B,GAAG,2BAA2B;MAC9EW,IAAI,EAAEf,YAAY,CAACkC,GAAG,CAAE2B,MAAM,IAAMzD,YAAY,GAAGyD,MAAM,GAAG,GAAG,GAAGrE,UAAU,GAAGqE,MAAO,CAAC;MACvFoB,eAAe,EAAE,yBAAyB;MAC1CD,WAAW,EAAE,uBAAuB;MACpCK,WAAW,EAAE;IACf,CAAC;EAEL,CAAC;EAED,oBACElG,OAAA;IAAKmG,KAAK,EAAE;MAAEC,OAAO,EAAE;IAAO,CAAE;IAAAC,QAAA,gBAC9BrG,OAAA;MAAAqG,QAAA,EAAI;IAAyB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAElCzG,OAAA;MAAKmG,KAAK,EAAE;QAAEO,YAAY,EAAE;MAAO,CAAE;MAAAL,QAAA,eACnCrG,OAAA;QAAAqG,QAAA,GAAO,eAEL,eAAArG,OAAA;UACE2G,IAAI,EAAC,MAAM;UACXC,KAAK,EAAEzG,WAAY;UACnB0G,QAAQ,EAAGC,CAAC,IAAK1G,cAAc,CAAC0G,CAAC,CAACC,MAAM,CAACH,KAAK,CAACI,WAAW,CAAC,CAAC,CAAE;UAC9Db,KAAK,EAAE;YAAEc,UAAU,EAAE;UAAO;QAAE;UAAAX,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/B,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAENzG,OAAA;MAAQkH,OAAO,EAAEA,CAAA,KAAMhG,eAAe,CAAC,CAACD,YAAY,CAAE;MAAAoF,QAAA,EACnDpF,YAAY,GAAG,kBAAkB,GAAG;IAAyB;MAAAqF,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxD,CAAC,EAERtF,OAAO,iBAAInB,OAAA;MAAAqG,QAAA,EAAG;IAAe;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC,EACjCpF,KAAK,iBAAIrB,OAAA;MAAGmG,KAAK,EAAE;QAAEgB,KAAK,EAAE;MAAM,CAAE;MAAAd,QAAA,EAAEhF;IAAK;MAAAiF,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAEjDzG,OAAA;MAAKmG,KAAK,EAAE;QAAEiB,SAAS,EAAE;MAAO,CAAE;MAAAf,QAAA,gBAChCrG,OAAA;QAAAqG,QAAA,GAAI,uBAAqB,EAAClG,WAAW;MAAA;QAAAmG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,EAC1ClG,SAAS,CAACoE,MAAM,GAAG,CAAC,gBAAG3E,OAAA,CAACH,IAAI;QAAC+B,IAAI,EAAE0D;MAAe;QAAAgB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,gBAAGzG,OAAA;QAAAqG,QAAA,EAAG;MAAuB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAEvFzG,OAAA;QAAImG,KAAK,EAAE;UAAEiB,SAAS,EAAE;QAAO,CAAE;QAAAf,QAAA,EAAC;MAA4C;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAClF9F,WAAW,CAACgE,MAAM,GAAG,CAAC,IAAI9D,YAAY,CAAC8D,MAAM,GAAG,CAAC,gBAChD3E,OAAA,CAACF,GAAG;QAAC8B,IAAI,EAAEqE;MAAuB;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,gBAErCzG,OAAA;QAAAqG,QAAA,EAAG;MAAmC;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAC1C;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAACvG,EAAA,CAjMID,mBAAmB;AAAAoH,EAAA,GAAnBpH,mBAAmB;AAmMzB,eAAeA,mBAAmB;AAAC,IAAAoH,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}